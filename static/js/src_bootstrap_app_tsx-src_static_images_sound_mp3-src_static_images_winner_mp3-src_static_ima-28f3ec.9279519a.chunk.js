(globalThis.webpackChunklucky_wheel=globalThis.webpackChunklucky_wheel||[]).push([["src_bootstrap_app_tsx-src_static_images_sound_mp3-src_static_images_winner_mp3-src_static_ima-28f3ec"],{98463:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ReactComponent:()=>p,default:()=>h});var r,a,s,i,l,c,o=n(92950);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}function u(e,t){let{title:n,titleId:u,...p}=e;return o.createElement("svg",d({width:96,height:96,viewBox:"0 0 96 96",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":u},p),n?o.createElement("title",{id:u},n):null,r||(r=o.createElement("rect",{width:96,height:96,rx:24,fill:"url(#paint0_linear_3166_6054)"})),a||(a=o.createElement("path",{opacity:.5,d:"M33.2491 48C33.2491 45.1293 34.0891 42.4482 35.5235 40.1533C35.7811 39.7413 35.7373 39.2022 35.3937 38.8586L23.7776 27.2425C23.3676 26.8324 22.6947 26.8552 22.3289 27.3052C17.7288 32.9639 15 40.1671 15 48C15 55.8311 17.7276 63.0328 22.2972 68.6909C22.662 69.1427 23.336 69.167 23.7471 68.7569L35.3922 57.1413C35.7366 56.7978 35.7807 56.2582 35.523 55.8457C34.0888 53.551 33.2491 50.8703 33.2491 48Z",fill:"#212433"})),s||(s=o.createElement("path",{d:"M48.0993 33.1501C50.97 33.1501 53.651 33.9901 55.9459 35.4245C56.358 35.6821 56.8971 35.6383 57.2407 35.2947L68.7599 23.7755C69.1692 23.3662 69.1475 22.6949 68.6993 22.3287C63.0691 17.7287 55.8645 15 48.0003 15C40.1692 15 32.9976 17.7275 27.3423 22.297C26.8906 22.662 26.8663 23.336 27.2763 23.7471L38.8535 35.3537C39.1994 35.7005 39.7437 35.7426 40.157 35.4797C42.457 34.0165 45.1698 33.1501 48.0993 33.1501Z",fill:"#212433"})),i||(i=o.createElement("path",{opacity:.5,d:"M73.3619 26.9267C73.1758 26.7039 72.8391 26.6915 72.6335 26.8965L60.4447 39.0541C60.2713 39.2271 60.2495 39.4997 60.3866 39.7026C61.9902 42.0764 62.9491 44.9184 62.9491 48C62.9491 51.0819 61.9901 53.924 60.3862 56.298C60.2493 56.5007 60.2709 56.773 60.4439 56.946L72.6335 69.1356C72.839 69.3411 73.1761 69.3289 73.3623 69.1058C78.1367 63.3869 81.0001 56.0238 81.0001 48C81.0001 39.976 78.1365 32.6443 73.3619 26.9267Z",fill:"#212433"})),l||(l=o.createElement("path",{d:"M48.0991 62.8499C45.0172 62.8499 42.1751 61.8909 39.8012 60.2871C39.5984 60.1502 39.3262 60.1718 39.1532 60.3448L26.8645 72.6334C26.6591 72.8389 26.6712 73.176 26.8943 73.3622C32.6133 78.1366 39.9763 81 48.0001 81C56.0572 81 63.4219 78.1358 69.1104 73.3295C69.3315 73.1427 69.3426 72.8074 69.1379 72.6027L56.9433 60.4081C56.7715 60.2363 56.5015 60.2136 56.2991 60.3479C53.9279 61.9207 51.1184 62.8499 48.0991 62.8499Z",fill:"#212433"})),c||(c=o.createElement("defs",null,o.createElement("linearGradient",{id:"paint0_linear_3166_6054",x1:0,y1:96,x2:104.62,y2:85.4464,gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#9945FF"}),o.createElement("stop",{offset:1,stopColor:"#B9F8FD"})))))}const p=o.forwardRef(u),h=n.p+"static/media/logo.c646f6444e0d9e3a8fd446c4798713e5.svg"},45597:(e,t,n)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),Object.defineProperty(t,"jY",{enumerable:!0,get:function(){return i.default}}),t.h0=void 0,Object.defineProperty(t,"ng",{enumerable:!0,get:function(){return l.default}});var r=c(n(27803)),a=c(n(85468)),s=c(n(83943)),i=c(n(98463)),l=c(n(83272));function c(e){return e&&e.__esModule?e:{default:e}}const o=[r.default,a.default,s.default];t.h0=o},12723:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Page:()=>ar,__esModule:()=>nr.X$,logo:()=>nr.jY,panels:()=>nr.h0,readme:()=>nr.ng});var r=n(92950),a=n(55754),s=n(41165),i=n(45055),l=n(4848),c=n.n(l),o=n(94751),d=n(36645),u=n(4550),p=n.n(u),h=n(6109);let w;!function(e){e.Token="token",e.NFT="nft",e.GoodLuck="good-luck",e.Ticket="ticket"}(w||(w={}));const x=["radial-gradient(47.41% 47.41% at 49.98% 50.04%, #8952CC 10.07%, #B67AFF 58.27%, #D2ADFF 85.66%, #D2ADFF 92.66%, #A462F5 100%)","radial-gradient(47.41% 47.41% at 49.98% 50.04%, #52C4CC 10.07%, #7AF6FF 58.27%, #B3FAFF 85.66%, #85F7FF 92.66%, #53DCE6 100%)","radial-gradient(47.41% 47.41% at 49.98% 50.04%, #C25F3E 10.07%, #EE7C56 58.27%, #FFAB8F 84.11%, #FFA385 92.66%, #E67049 100%)"];let y,m;!function(e){e.Spin="spin",e.Reward="reward",e.Challenge="challenge"}(y||(y={})),function(e){e.Claimed="CLAIMED",e.Ready="CLAIM",e.Pending="SPIN MORE"}(m||(m={}));const g="11111111111111111111111111111111";let C;!function(e){e.Token="Token",e.NFT="NFT",e.Ticket="Ticket"}(C||(C={}));const j=e=>(0,a.useSelector)((t=>t.rewards[e]));var f=n(45263);const b=e=>{let{rewardAddress:t}=e;const n=j(t);return null!==n&&void 0!==n&&n.rewardType&&t!==g?n.rewardType.nftCollection?(0,f.jsx)("span",{children:"1"}):n.rewardType.ticket?(0,f.jsx)("span",{children:n.prizeAmount.toNumber()}):(0,f.jsx)(h.Z,{mintAddress:n.mint,amount:n.prizeAmount}):null};var k=n(74939);const T=n.p+"static/media/good-luck-icon.b0914abdc9cae6b01db6.png",v=n.p+"static/media/ticket-icon.addffd5f07fb7f68f0f0.png",A=e=>{let{rewardAddress:t,size:n}=e;const r=j(t);return null!==r&&void 0!==r&&r.rewardType&&t!==g?r.rewardType.ticket?(0,f.jsx)(o.Avatar,{size:n,src:v,shape:"square"}):(0,f.jsx)(k.Z,{mintAddress:r.mint,size:n}):(0,f.jsx)(o.Avatar,{size:n,shape:"circle",src:T})};var S=n(27906),R=n(99370),N=n(66073);const P=e=>{let{rewardAddress:t}=e;const n=j(t)||{mint:new S.web3.PublicKey(g)},{nftInfo:r,metadata:a}=(0,N.useNftMetaData)(n.mint.toBase58());return null!==n&&void 0!==n&&n.rewardType&&t!==g?n.rewardType.ticket?(0,f.jsx)("span",{children:"Ticket"}):n.rewardType.nftCollection?(0,f.jsx)("span",{children:(null===a||void 0===a?void 0:a.data.data.name)||(null===r||void 0===r?void 0:r.name)}):(0,f.jsx)(R.Z,{mintAddress:n.mint}):(0,f.jsxs)("span",{children:["Good ",(0,f.jsx)("br",{})," luck"]})},B=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=(0,a.useSelector)((e=>e.tickets)),i=(0,s.useWalletAddress)(),l=(0,r.useMemo)((()=>{const r={};for(const a in n){const{authority:s,campaign:l}=n[a];l.toBase58()===e&&(s.toBase58()!==i&&t||(r[a]=n[a]))}return r}),[e,t,n,i]);return l},I=(e,t)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open(s.util.explorer(t),"_blank")}),F=e=>window.notify({type:"error",description:e.message}),M=e=>{const t=(0,a.useSelector)((e=>e.rewards));return(0,r.useMemo)((()=>{const n={};for(const r in t){const{campaign:a}=t[r];a.toBase58()===e&&(n[r]=t[r])}return n}),[t,e])};const z={appId:"lucky_wheel",url:"https://descartesnetwork.github.io/sen-lucky-wheel/index.js"},E={development:{...z},production:{...z}},L={devnet:{node:"https://api.devnet.solana.com",programId:"38k8ejgfKJ2VKRApCMkev1hQwqobTTZPLnX11t2dxAXA",campaignId:"CMaVCUKcxf2qHNhvcnLUEmpXWs9aZWB4xp5nYACj6a2g"},testnet:{node:"https://api.testnet.solana.com",programId:"2L1eKz8TA88j84yoAywGdeKF1ohvjQC4iMxzR5GbjkWD",campaignId:"CMaVCUKcxf2qHNhvcnLUEmpXWs9aZWB4xp5nYACj6a2g"},mainnet:{node:"https://api.mainnet-beta.solana.com",programId:"3sFeMcoZbqRJVVZpv2jvK6zfDopJ48B2vxzTBsHPoSJ7",campaignId:"CMaVCUKcxf2qHNhvcnLUEmpXWs9aZWB4xp5nYACj6a2g"}},D=e=>({origin:e,lottery:{index:e+"/lottery",get publicKey(){return this.index+"/util/lottery-pubkey"},get luckyNumber(){return this.index+"/lucky-number/"}}}),W={development:{...D("https://api.sentre.io")},production:{...D("https://api.sentre.io")}},O={manifest:E[s.env],sol:L[s.net],api:W[s.env]};var K=n(19289);const Z="main",_={campaign:"",congratulate:!1,tabId:y.Spin},Y=(0,K.createAsyncThunk)("main/setCampaign",(async e=>{let{campaign:t}=e;return{campaign:t}})),V=(0,K.createAsyncThunk)("main/setCongratulate",(async e=>{let{congratulate:t}=e;return{congratulate:t}})),H=(0,K.createAsyncThunk)("main/setTabId",(async e=>{let{tabId:t}=e;return{tabId:t}})),U=(0,K.createSlice)({name:Z,initialState:_,reducers:{},extraReducers:e=>{e.addCase(Y.fulfilled,((e,t)=>{let{payload:n}=t;Object.assign(e,n)})).addCase(V.fulfilled,((e,t)=>{let{payload:n}=t;Object.assign(e,n)})).addCase(H.fulfilled,((e,t)=>{let{payload:n}=t;Object.assign(e,n)}))}}).reducer,G=()=>{const e=(0,a.useSelector)((e=>e.main.campaign)),t=(0,a.useSelector)((e=>e.campaigns)),n=(0,a.useDispatch)();return(0,r.useEffect)((()=>{!t[e]&&Object.keys(t).length&&n(Y({campaign:Object.keys(t)[0]})),e||n(Y({campaign:O.sol.campaignId}))}),[t,n,e]),e},$=e=>{let{ticketAddress:t}=e;const n=G(),a=B(n),{state:s}=a[t],{onClaim:i,loading:l}=(()=>{const[e,t]=(0,r.useState)(!1),n=G(),a=M(n),s=B(n),i=(0,r.useCallback)((async e=>{const t=window.sentre.splt,{mint:n}=a[e],{rewardTreasurer:r}=await window.luckyWheel.deriveRewardPDAs(new S.web3.PublicKey(e),n),{value:s}=await t.connection.getTokenAccountsByOwner(r,{programId:t.spltProgramId});for(const a of s){const e=t.parseAccountData(a.account.data);if(Number(e.amount.toString())>0)return new S.web3.PublicKey(e.mint)}throw new Error("Can't find account")}),[a]);return{onClaim:(0,r.useCallback)((async e=>{try{t(!0);const r=s[e].reward.toBase58(),{rewardType:l,mint:c,prizeAmount:o}=a[r];let d=c;l.nftCollection&&(d=await i(r));const u=new S.web3.Transaction,p=[],{tx:h}=await window.luckyWheel.claim({ticket:new S.web3.PublicKey(e),mint:d,sendAndConfirm:!1});if(u.add(h),l.ticket)for(let e=0;e<o.toNumber();e++){const e=S.web3.Keypair.generate(),{tx:t}=await window.luckyWheel.redeemTicket({campaign:new S.web3.PublicKey(n),ticket:e,sendAndConfirm:!1});u.add(t),p.push(e)}const w=await window.luckyWheel.provider.sendAndConfirm(u,p);return I("Claimed",w)}catch(r){return F(r)}finally{t(!1)}}),[i,a,n,s]),loading:e}})();return s.claimed?(0,f.jsx)(o.Typography.Title,{level:5,children:"CLAIMED"}):(0,f.jsx)(o.Button,{loading:l,type:"primary",onClick:()=>i(t),children:"CLAIM"})},X=e=>{let{history:t}=e;return(0,f.jsx)(o.Card,{bodyStyle:{padding:16},className:"list-reward",bordered:!1,children:t.length?(0,f.jsx)(o.Row,{gutter:[16,16],children:t.map((e=>{let{reward:t,ticketAddress:n,pickAt:r}=e;return(0,f.jsx)(o.Col,{span:24,className:"list-reward_item",children:(0,f.jsxs)(o.Row,{align:"top",children:[(0,f.jsx)(o.Col,{flex:"auto",children:(0,f.jsxs)(o.Space,{direction:"vertical",children:[(0,f.jsxs)(o.Space,{children:[(0,f.jsx)(A,{size:24,rewardAddress:t.toBase58()}),(0,f.jsx)(b,{rewardAddress:t.toBase58()}),(0,f.jsx)(P,{rewardAddress:t.toBase58()})]}),(0,f.jsx)(o.Typography.Text,{type:"secondary",children:p()(1e3*r.toNumber()).format("MMM DD, YYYY HH:mm")})]})}),(0,f.jsx)(o.Col,{children:(0,f.jsx)($,{ticketAddress:n})})]})},n)}))}):(0,f.jsx)(o.Empty,{description:"You don't have any reward"})})},J=()=>{const e=G(),t=B(e),[n,a]=(0,r.useState)(!1),i=(0,s.useInfix)(),l=(0,r.useMemo)((()=>{const e=[];for(const r in t){const a=t[r],s=a.state;(s.claimed&&!n||s.won)&&e.push({...a,ticketAddress:r})}return e}),[n,t]).sort(((e,t)=>{const n=e.pickAt.toNumber();return t.pickAt.toNumber()-n})),c=[{title:"TIME",dataIndex:"pickAt",key:"pickAt",render:e=>(0,f.jsx)(o.Typography.Text,{children:p()(1e3*e.toNumber()).format("MMM DD, YYYY HH:mm")})},{title:"REWARD",dataIndex:"reward",key:"reward",render:e=>(0,f.jsxs)(o.Space,{children:[(0,f.jsx)(A,{size:24,rewardAddress:e.toBase58()}),(0,f.jsx)(P,{rewardAddress:e.toBase58()})]})},{title:"AMOUNT",dataIndex:"reward",key:"reward",render:e=>(0,f.jsx)(b,{rewardAddress:e.toBase58()})},{title:"ACTIONS",dataIndex:"ticketAddress",key:"ticketAddress",render:e=>(0,f.jsx)($,{ticketAddress:e})}];return(0,f.jsxs)(o.Row,{gutter:[12,12],children:[(0,f.jsx)(o.Col,{span:24,style:{textAlign:"right"},children:(0,f.jsxs)(o.Space,{children:[(0,f.jsx)(o.Typography.Text,{children:"Claim only"}),(0,f.jsx)(o.Switch,{onChange:a,size:"small"})]})}),(0,f.jsx)(o.Col,{span:24,children:i===s.Infix.xs?(0,f.jsx)(X,{history:l}):(0,f.jsx)(o.Table,{dataSource:l,columns:c,pagination:!1})})]})},q=e=>{let{material:t}=e;const{rewardAddress:n}=t,a=(0,s.useWidth)(),i=(0,r.useMemo)((()=>a<590?32:a<427?16:64),[a]);return(0,f.jsxs)(o.Space,{style:{zIndex:3,position:"relative"},direction:"vertical",size:0,children:[(0,f.jsx)(A,{rewardAddress:n,size:i}),(0,f.jsx)(o.Typography.Title,{level:4,style:{color:"#212433",fontFamily:"Nunito",fontWeight:"bold"},children:(0,f.jsx)(b,{rewardAddress:n})}),(0,f.jsx)(o.Typography.Title,{level:5,style:{color:"#212433",fontFamily:"Nunito"},children:(0,f.jsx)(P,{rewardAddress:n})})]})};var Q=n(43785);const ee=e=>{const t=(0,a.useSelector)((e=>e.tickets)),n=(0,s.useWalletAddress)();return(0,r.useMemo)((()=>{const r={};for(const a in t){const s=t[a],{authority:i,campaign:l}=s;i.toBase58()===n&&l.toBase58()===e&&s.state.initialized&&(r[a]=s)}return r}),[e,t,n])},te=e=>{let{onClose:t,visible:n,onSpinning:r}=e;const a=G(),s=ee(a);return(0,f.jsx)(o.Modal,{visible:n,onCancel:()=>t(!1),footer:null,closeIcon:(0,f.jsx)(Q.default,{name:"close-outline"}),className:"congrats",children:(0,f.jsxs)(o.Row,{gutter:[16,16],className:"congrats_content",children:[(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.Avatar,{size:96,shape:"circle",src:T})}),(0,f.jsx)(o.Col,{span:24})," ",(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.Typography.Title,{level:4,className:"gradient-text",children:"Good luck"})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.Typography.Text,{type:"secondary",children:"You have almost reached. Try again."})}),(0,f.jsx)(o.Col,{span:24})," ",(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.Button,{type:"primary",size:"large",block:!0,onClick:()=>{t(!1),r(1,!1)},disabled:!Object.keys(s).length,children:"SPIN AGAIN"})})]})})};const ne=n.p+"static/media/bg-popup.91133c926245c4382d5a3b2ab660d0a6.svg",re=e=>{let{onClose:t,visible:n,pickedTickets:s,onSpinning:i}=e;const l=G(),c=ee(l),d=B(l),u=(0,a.useDispatch)();return(0,r.useEffect)((()=>{u(V({congratulate:!0})),setTimeout((()=>{u(V({congratulate:!1}))}),5e3)}),[u]),(0,f.jsxs)(o.Modal,{visible:n,onCancel:()=>t(!1),footer:null,closeIcon:(0,f.jsx)(Q.default,{name:"close-outline"}),className:"congrats",children:[(0,f.jsx)(o.Image,{preview:!1,src:ne,style:{borderRadius:16}}),(0,f.jsxs)(o.Row,{gutter:[16,16],className:"congrats_content",children:[(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.Typography.Title,{level:4,className:"gradient-text",children:"Congratulations!"})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsxs)(o.Typography.Text,{children:["You have received ",s.length," reward!"]})}),(0,f.jsx)(o.Col,{span:24})," ",(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.Row,{gutter:[16,16],children:s.map((e=>{const t=d[e].reward.toBase58();return(0,f.jsx)(o.Col,{span:1===s.length?24:12,children:(0,f.jsxs)(o.Space,{size:16,direction:"vertical",children:[(0,f.jsx)(A,{size:96,rewardAddress:t}),(0,f.jsxs)(o.Typography.Title,{level:3,children:[(0,f.jsx)(b,{rewardAddress:t})," ",(0,f.jsx)(P,{rewardAddress:t})]})]})},e)}))})}),(0,f.jsx)(o.Col,{span:24})," ",(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.Button,{onClick:()=>{u(H({tabId:y.Reward})),t(!1)},size:"large",type:"primary",block:!0,children:"GET YOUR REWARDS"})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.Button,{size:"large",block:!0,onClick:()=>{t(!1),i(1,!1)},disabled:!Object.keys(c).length,children:"SPIN MORE"})})]})]})},ae=e=>{let{pickedTickets:t,onSpinning:n}=e;const[a,s]=(0,r.useState)(!1),i=G(),l=B(i),c=(0,r.useMemo)((()=>t.filter((e=>l[e].state.won))),[t,l]);return(0,r.useEffect)((()=>{s(!!t.length)}),[t]),c.length?(0,f.jsx)(re,{pickedTickets:c,visible:a,onClose:()=>s(!1),onSpinning:n}):(0,f.jsx)(te,{visible:a,onSpinning:n,onClose:()=>s(!1)})};var se=n(21995),ie=n.n(se);const le=e=>{let t=new S.BN(0);for(let n=0;n<18;n++){let r=new S.BN(e[n]%10);t=t.add(r.mul(new S.BN(1+"0".repeat(n))))}return t},ce=e=>{const t=ee(e),n=(e=>{const t=M(e);return(0,r.useCallback)((async()=>{let e=[];for(const n in t){const{reservePrize:r}=t[n];r.isZero()||e.push(new S.web3.PublicKey(n))}return e=e.sort(((e,n)=>{const r=t[e.toBase58()].toLuckyNumber,a=t[n.toBase58()].toLuckyNumber;return r.gt(a)?1:-1})),e}),[t])})(e),s=(()=>{const e=G(),t=(0,a.useSelector)((t=>t.campaigns[e].picker));return(0,r.useCallback)((async e=>{const{data:n}=await ie().get(O.api.lottery.publicKey,{withCredentials:!0}),r=await window.luckyWheel.decodePickerPublickey(n);let a=window.luckyWheel.picker.sign(new S.web3.PublicKey(e).toBuffer());if(JSON.stringify(t)===JSON.stringify(r)){const{data:t}=await ie().get(O.api.lottery.luckyNumber+e,{withCredentials:!0});a=t}const s=Array.from(a.signature);return{ticket:new S.web3.PublicKey(e),recoveryId:a.recid,signature:s,luckyNumber:le(s)}}),[t])})();return(0,r.useCallback)((async r=>{const a=Object.keys(t);if(a.length<r)throw new Error("Insufficient ticket");const i=a.slice(0,r);let l=[];try{const{lotteryInfo:t}=await window.luckyWheel.deriveCampaignPDAs(new S.web3.PublicKey(e));await window.luckyWheel.program.account.lotteryInfo.fetch(t)}catch(o){const{tx:t}=await window.luckyWheel.initializeLotteryInfo({campaign:new S.web3.PublicKey(e),sendAndConfirm:!1});l.push(t)}const c=i.map((async e=>{const t=await s(e),r=await n(),a=new S.web3.Transaction,{tx:i}=await window.luckyWheel.pickLuckyNumber({...t,sendAndConfirm:!1});a.add(i);const{tx:l}=await window.luckyWheel.checkPrize({...t,rewards:r,sendAndConfirm:!1});return a.add(l),a}));return l=l.concat(await Promise.all(c)),await window.luckyWheel.provider.sendAll(l.map((e=>({tx:e})))),i}),[t,e,n,s])},oe=n.p+"static/media/arrow.819fcbae1cab8f5a9996.png",de=n.p+"static/media/sound.b65c6942e825307bfb6f.mp3",ue=n.p+"static/media/winner.726b163ee6fbabfae0b3.mp3";let pe=new Audio(de),he=new Audio(ue);const we=e=>{let{rewards:t}=e;const[n,a]=(0,r.useState)(!1),[s,i]=(0,r.useState)(!1),[l,c]=(0,r.useState)([]),d=G(),u=ee(d),p=ce(d),h=Math.ceil(360/t.length),y=90-h,m=Math.floor(h/2),g=(0,r.useMemo)((()=>{const e=new Map;for(let n=0;n<t.length;n++)e.set(t[n].rewardAddress,n*h);return e}),[t,h]),C=(0,r.useMemo)((()=>{let e=0;const n=[];for(let r=1;r<=t.length;r++)x[e]||(e=0,r===t.length&&[n[0],n[r-1]].includes(x[e])&&e++),n.push(x[e]),e++;return n}),[t.length]),j=async(e,t)=>{let n=[];try{t?i(!0):a(!0),n=await p(e),pe.play();let r=document.getElementById("wheel");if(!r)return;const s=-2e4,l=-1e4;let o=Math.floor(Math.random()*(s-l+1))+l;r.style.transform="rotate("+o+"deg)",r.style.transition="3s all";let d=w.GoodLuck;const u=await window.luckyWheel.account.ticket.fetch(n[0]);u.state.won&&(d=u.reward.toBase58()),setTimeout((()=>{r&&(o=-(g.get(d||w.GoodLuck)||0)-m,r.style.transform="rotate("+o+"deg)")}),2e3)}catch(r){F(r)}finally{setTimeout((()=>{pe.pause(),pe.currentTime=0,he.currentTime=0,he.play(),a(!1),i(!1),c(n)}),5e3)}},b=(0,r.useMemo)((()=>{const e=Object.keys(u).length;return e>5?5:e}),[u]),k=n||s||!Object.keys(u).length;return(0,f.jsxs)(o.Row,{gutter:[0,32],children:[(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)("div",{className:"container",children:(0,f.jsxs)("div",{className:"container-body",children:[(0,f.jsx)(o.Image,{src:oe,id:"stopper",preview:!1}),(0,f.jsx)("ul",{className:"circle",id:"wheel",children:t.map(((e,t)=>(0,f.jsx)("li",{style:{transform:`rotate(${t*h}deg) skewY(-${y}deg)`},children:(0,f.jsxs)("div",{style:{transform:`skewY(${y}deg) rotate(${m}deg)`},className:"text",children:[(0,f.jsx)("div",{className:"bg",style:{background:`${C[t]}`}}),(0,f.jsx)(q,{material:e})]})},e.rewardAddress)))})]})})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsxs)(o.Row,{gutter:[16,16],children:[(0,f.jsx)(o.Col,{xs:24,lg:12,children:(0,f.jsx)(o.Button,{size:"large",block:!0,disabled:k,onClick:()=>j(1,!1),loading:n,type:"primary",children:"SPIN X1"})}),(0,f.jsx)(o.Col,{xs:24,lg:12,children:(0,f.jsxs)(o.Button,{size:"large",block:!0,disabled:k,loading:s,onClick:()=>j(b,!0),children:["SPIN X",b]})})]})}),(0,f.jsx)(ae,{onSpinning:j,pickedTickets:l})]})},xe=()=>{const[e,t]=(0,r.useState)(0),[n,a]=(0,r.useState)(""),i=(0,s.useAccounts)(),l=G(),c=(0,r.useCallback)((async()=>{try{const{ticketMint:e}=await window.luckyWheel.deriveCampaignPDAs(new S.web3.PublicKey(l)),n=e.toBase58();a(n);for(const r in i){const{mint:e,amount:a}=i[r];if(e===n)return t(Number(a))}}catch(e){}}),[i,l]);return(0,r.useEffect)((()=>{c()}),[c]),{totalTicket:e,ticketMintAddr:n}};var ye,me;function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ge.apply(this,arguments)}function Ce(e,t){let{title:n,titleId:a,...s}=e;return r.createElement("svg",ge({width:17,height:14,viewBox:"0 0 17 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,ye||(ye=r.createElement("path",{d:"M12.3745 0.216797L6.75786 0.216797V2.73346C6.75786 3.05846 6.4912 3.3168 6.17453 3.3168C5.85786 3.3168 5.5912 3.05846 5.5912 2.73346V0.216797L4.62453 0.216797C1.33286 0.216797 0.249528 1.20013 0.174528 4.27513C0.166195 4.42513 0.232862 4.58346 0.341195 4.6918C0.449528 4.80846 0.591195 4.8668 0.757862 4.8668C1.92453 4.8668 2.88286 5.83346 2.88286 7.00013C2.88286 8.1668 1.92453 9.13346 0.757862 9.13346C0.599528 9.13346 0.449528 9.1918 0.341195 9.30846C0.232862 9.4168 0.166195 9.57513 0.174528 9.72513C0.249528 12.8001 1.33286 13.7835 4.62453 13.7835H5.5912V11.2668C5.5912 10.9418 5.85786 10.6835 6.17453 10.6835C6.4912 10.6835 6.75786 10.9418 6.75786 11.2668V13.7835H12.3745C15.7912 13.7835 16.8329 12.7418 16.8329 9.32513V4.67513C16.8329 1.25846 15.7912 0.216797 12.3745 0.216797ZM13.8912 6.9168L13.1162 7.6668C13.0829 7.6918 13.0745 7.7418 13.0829 7.78346L13.2662 8.8418C13.2995 9.03346 13.2245 9.23346 13.0579 9.35013C12.8995 9.4668 12.6912 9.48346 12.5162 9.3918L11.5579 8.8918C11.5245 8.87513 11.4745 8.87513 11.4412 8.8918L10.4829 9.3918C10.4079 9.43346 10.3245 9.45013 10.2412 9.45013C10.1329 9.45013 10.0329 9.4168 9.94119 9.35013C9.78286 9.23346 9.69953 9.0418 9.73286 8.8418L9.9162 7.78346C9.92453 7.7418 9.90786 7.70013 9.88286 7.6668L9.10786 6.9168C8.96619 6.78346 8.91619 6.57513 8.97453 6.3918C9.03286 6.20013 9.19119 6.0668 9.39119 6.0418L10.4579 5.88346C10.4995 5.87513 10.5329 5.85013 10.5579 5.8168L11.0329 4.85013C11.1245 4.67513 11.2995 4.5668 11.4995 4.5668C11.6995 4.5668 11.8745 4.67513 11.9579 4.85013L12.4329 5.8168C12.4495 5.85846 12.4829 5.88346 12.5245 5.88346L13.5912 6.0418C13.7912 6.0668 13.9495 6.20846 14.0079 6.3918C14.0829 6.57513 14.0329 6.77513 13.8912 6.9168Z",fill:"url(#paint0_linear_12611_1727)"})),me||(me=r.createElement("defs",null,r.createElement("linearGradient",{id:"paint0_linear_12611_1727",x1:.173828,y1:13.7835,x2:18.2362,y2:11.5461,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#9945FF"}),r.createElement("stop",{offset:1,stopColor:"#B9F8FD"})))))}const je=r.forwardRef(Ce),fe=(n.p,()=>{const e=G(),t=M(e),n=ee(e),{totalTicket:a}=xe(),{loading:s,redeemTicket:i}=(()=>{const[e,t]=(0,r.useState)(!1),{totalTicket:n}=xe(),a=G();return{loading:e,redeemTicket:(0,r.useCallback)((async()=>{if(!n)return;let e=7;try{t(!0);let r=[];for(let t=0;t<n;t+=e){const s=new S.web3.Transaction,i=[];(t+e>n||e>n)&&(e=n-t);for(let t=0;t<e;t++){const e=S.web3.Keypair.generate(),{tx:t}=await window.luckyWheel.redeemTicket({campaign:new S.web3.PublicKey(a),ticket:e,sendAndConfirm:!1});s.add(t),i.push(e)}r.push({tx:s,signers:i})}return await window.luckyWheel.provider.sendAll(r.map((e=>{let{tx:t,signers:n}=e;return{tx:t,signers:n}}))),window.notify({type:"success",description:"Redeemed tickets successfully."})}catch(r){return F(r)}finally{t(!1)}}),[a,n])}})(),l=(0,r.useMemo)((()=>{const e=[{type:w.GoodLuck,rewardAddress:w.GoodLuck}];for(const n in t){const{rewardType:r}=t[n];let a=w.Token;r.nftCollection&&(a=w.NFT),r.ticket&&(a=w.Ticket),e.push({type:a,rewardAddress:n})}return e}),[t]);return(0,f.jsxs)(o.Row,{gutter:[16,16],justify:"center",children:[(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(we,{rewards:l})}),(0,f.jsx)(o.Col,{span:24,className:"remaining-ticket",children:(0,f.jsx)(o.Row,{justify:"center",children:(0,f.jsx)(o.Col,{xs:24,sm:20,md:18,lg:16,children:(0,f.jsxs)(o.Row,{justify:"space-between",wrap:!1,align:"middle",children:[(0,f.jsx)(o.Col,{children:(0,f.jsxs)(o.Space,{size:4,direction:"vertical",children:[(0,f.jsxs)(o.Space,{className:"space-middle-icon",children:[(0,f.jsx)(o.Typography.Text,{children:"Remaining tickets:"}),(0,f.jsx)(o.Typography.Title,{level:5,className:"gradient-text",children:Object.keys(n).length}),(0,f.jsx)(d.Z,{style:{fontSize:20},component:je})]}),!!a&&(0,f.jsxs)(o.Space,{size:0,children:[(0,f.jsxs)(o.Typography.Text,{children:["You have ",a," bonus tickets"]}),(0,f.jsx)(o.Button,{type:"text",onClick:i,loading:s,children:"Claim"})]})]})}),(0,f.jsx)(o.Col,{children:(0,f.jsx)(o.Divider,{type:"vertical",style:{borderColor:"#4E4F5C",height:24}})}),(0,f.jsx)(o.Col,{children:(0,f.jsx)(o.Button,{onClick:()=>window.open("https://hub.sentre.io/app/any_arts?autoInstall=true"),style:{marginLeft:-12},type:"text",children:"Get more ticket"})})]})})})})]})}),be=e=>{let{tabId:t}=e;return t===y.Reward?(0,f.jsx)(J,{}):t===y.Spin?(0,f.jsx)(fe,{}):(0,f.jsx)(r.Fragment,{})},ke=e=>{let{children:t}=e;return(0,f.jsx)(o.Row,{justify:"center",children:(0,f.jsx)(o.Col,{xs:24,md:16,lg:12,children:(0,f.jsx)(o.Col,{span:24,children:t})})})};var Te=n(29981);const ve=e=>{const t=(0,a.useSelector)((e=>e.lotteryInfos)),n=(0,s.useWalletAddress)(),i=Object.values(t).find((t=>t.campaign.toBase58()===e&&t.authority.toBase58()===n)),l=(0,r.useMemo)((()=>({authority:new S.web3.PublicKey(n),campaign:new S.web3.PublicKey(e),totalPicked:new S.BN(0),totalClaimed:new S.BN(0)})),[e,n]);return i||l},Ae=()=>{const e=G(),t=ve(e);return(0,f.jsxs)(o.Space,{size:4,className:"remaining-ticket space-middle-icon",children:[(0,f.jsx)(o.Typography.Text,{children:"Total spins:"}),(0,f.jsx)(o.Typography.Title,{level:5,className:"gradient-text",children:t.totalPicked.toNumber()}),(0,f.jsx)(d.Z,{style:{fontSize:20},component:je})]})},Se=n.p+"static/media/gift01.14ac25213fe68b027def.png",Re=e=>{let{src:t="",status:n=m.Pending,amount:r=0,active:s}=e;const i=s?"card-gift active":"card-gift",l=n===m.Pending?"default":"primary",c=n===m.Claimed?"card-gift-btn claimed-btn":"card-gift-btn",d=(0,a.useDispatch)();return(0,f.jsxs)("div",{className:i,children:[(0,f.jsxs)(o.Space,{direction:"vertical",align:"center",className:"card-gift_item",children:[(0,f.jsx)(o.Typography.Title,{level:4,children:(0,f.jsx)(h.Z,{mintAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",amount:new S.BN(1e12)})}),(0,f.jsx)(o.Image,{src:t,preview:!1})]}),(0,f.jsx)("div",{className:"gift-step-icon",children:r}),(0,f.jsx)("div",{className:c,children:(0,f.jsx)(o.Button,{type:l,onClick:()=>{if(n===m.Pending)return d(H({tabId:y.Spin}))},ghost:n===m.Claimed,children:n})})]})},Ne=e=>{const t=(0,a.useSelector)((e=>e.challengeRewards));return(0,r.useMemo)((()=>{const n={};for(const r in t){const{campaign:a}=t[r];a.toBase58()===e&&(n[r]=t[r])}return n}),[t,e])},Pe=()=>{const e=G(),t=Ne(e),n=ve(e),a=Object.keys(t).map((e=>{const n=t[e];let r=m.Pending;return{src:Se,value:n.totalPicked.toNumber(),status:r}})).sort(((e,t)=>e.value>t.value?1:-1));return(0,f.jsx)(r.Fragment,{children:a.map((e=>{let{src:t,status:r,value:a}=e;return(0,f.jsx)("div",{className:"card-challenge-gift",style:{left:`calc(${Number(a)*Fe}% - 75px)`},children:(0,f.jsx)("div",{style:{minWidth:150},children:(0,f.jsx)(Re,{src:t,status:r,amount:a,active:Number(a)<=n.totalPicked.toNumber()})})},a)}))})};var Be;!function(e){e.Horizontal="horizontal",e.Vertical="vertical"}(Be||(Be={}));const Ie=e=>{let{direction:t="horizontal",percent:n=0,showInfo:r=!1,style:a,strokeWitdh:s=4,borderRadius:i=s,background:l="#fff",successColor:c="#000",infoStyle:o}=e;const d=t===Be.Vertical?{flexFlow:"column",alignItems:"start",width:s,height:"100%"}:{flexFlow:"row nowrap",alignItems:"center",width:"100%"},u=t===Be.Vertical?{height:"100%",width:s}:{height:s,width:"100%"},p=t===Be.Vertical?{height:`${n}%`,width:"100%"}:{height:"100%",width:`${n}%`};return(0,f.jsxs)("div",{style:{display:"flex",gap:12,...d,...a},children:[(0,f.jsx)("div",{style:{display:"flex",...u,background:l,transition:"all 0.3s ease",borderRadius:i},children:(0,f.jsx)("div",{style:{...p,background:c,transition:"all 0.3s ease",borderRadius:i}})}),r&&(0,f.jsxs)("div",{style:{...o},children:[n,"%"]})]})},Fe=.5,Me=()=>{const e=G(),t=ve(e),n=(0,s.useInfix)()<s.Infix.lg,r=n?"vertical":"horizontal",a=n?48:134,i=n?"card-challenge mobile-direction":"card-challenge";return(0,f.jsx)(o.Row,{className:"challenge",children:(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(Te.Z,{className:i,children:(0,f.jsxs)(o.Row,{gutter:[24,a],justify:"center",children:[(0,f.jsx)(o.Col,{span:24,children:(0,f.jsxs)(o.Row,{className:"inner-challenge-progress",children:[(0,f.jsx)(o.Col,{className:"challenge-gifts",span:24,children:(0,f.jsx)(Pe,{})}),(0,f.jsx)(o.Col,{className:"challenge-progress",children:(0,f.jsx)(Ie,{percent:t.totalPicked.toNumber()*Fe,strokeWitdh:12,background:"#212433",successColor:"linear-gradient(84.24deg, #9945FF 0%, #B9F8FD 100%)",direction:r})})]})}),(0,f.jsx)(o.Col,{className:"challenge-action",children:(0,f.jsx)(Ae,{})})]})})})})};var ze,Ee,Le,De,We;function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oe.apply(this,arguments)}function Ke(e,t){let{title:n,titleId:a,...s}=e;return r.createElement("svg",Oe({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,ze||(ze=r.createElement("path",{d:"M7.03 3.17C7.02 3.08 7.01 3 6.99 2.91C6.98 2.84 6.97 2.77 6.95 2.69C6.92 2.57 6.88 2.44 6.83 2.32C6.71 1.97 6.53 1.65 6.3 1.35C6.17 1.19 6.03 1.03 5.87 0.9C5.23 0.32 4.4 0 3.53 0C1.58 0 0 1.58 0 3.53C0 4.4 0.32 5.23 0.9 5.87C1.03 6.03 1.19 6.17 1.35 6.3C1.65 6.53 1.97 6.71 2.32 6.83C2.44 6.88 2.57 6.92 2.69 6.95C2.77 6.97 2.84 6.98 2.91 6.99C3 7.01 3.08 7.02 3.17 7.03C3.29 7.04 3.41 7.05 3.53 7.05C5.47 7.05 7.05 5.47 7.05 3.53C7.05 3.41 7.04 3.29 7.03 3.17Z",fill:"#B67AFF"})),Ee||(Ee=r.createElement("path",{d:"M19.0992 14.1402C18.9992 14.0102 18.8692 13.8802 18.7292 13.7702C18.7092 13.7502 18.6792 13.7202 18.6492 13.7002C18.3792 13.4902 18.0792 13.3202 17.7692 13.2002C17.7392 13.1802 17.7092 13.1702 17.6792 13.1702C17.5692 13.1302 17.4592 13.0902 17.3492 13.0602C17.1792 13.0202 16.9992 12.9902 16.8292 12.9702C16.7092 12.9602 16.5892 12.9502 16.4692 12.9502C14.5292 12.9502 12.9492 14.5302 12.9492 16.4702C12.9492 16.5902 12.9592 16.7102 12.9692 16.8302C12.9892 17.0002 13.0192 17.1802 13.0592 17.3502C13.0892 17.4602 13.1292 17.5702 13.1692 17.6802C13.1692 17.7102 13.1792 17.7402 13.1992 17.7702C13.3192 18.0802 13.4892 18.3802 13.6992 18.6502C13.7192 18.6802 13.7492 18.7002 13.7692 18.7302C13.8792 18.8702 14.0092 19.0002 14.1392 19.1002C14.7792 19.6802 15.5992 20.0002 16.4692 20.0002C18.4192 20.0002 19.9992 18.4202 19.9992 16.4702C19.9992 15.6002 19.6792 14.7802 19.0992 14.1402Z",fill:"#B67AFF"})),Le||(Le=r.createElement("path",{d:"M3.53 12.9502C3.41 12.9502 3.29 12.9602 3.17 12.9702C3 12.9902 2.82 13.0202 2.65 13.0602C2.54 13.0902 2.43 13.1302 2.32 13.1702C2.29 13.1702 2.26 13.1802 2.23 13.2002C1.92 13.3202 1.62 13.4902 1.35 13.7002C1.32 13.7202 1.3 13.7502 1.27 13.7702C1.13 13.8802 1 14.0102 0.9 14.1402C0.32 14.7802 0 15.6002 0 16.4702C0 18.4202 1.58 20.0002 3.53 20.0002C4.4 20.0002 5.23 19.6802 5.87 19.1002C6.03 18.9702 6.17 18.8102 6.3 18.6502C6.51 18.3802 6.68 18.0802 6.8 17.7702C6.82 17.7402 6.83 17.7102 6.83 17.6802C6.87 17.5702 6.91 17.4602 6.94 17.3502C6.98 17.1802 7.01 17.0002 7.03 16.8302C7.04 16.7102 7.05 16.5902 7.05 16.4702C7.05 14.5302 5.47 12.9502 3.53 12.9502Z",fill:"#B67AFF"})),De||(De=r.createElement("path",{d:"M16.4692 0C15.5992 0 14.7792 0.32 14.1392 0.9C14.0092 1 13.8792 1.13 13.7692 1.27C13.7492 1.29 13.7192 1.32 13.6992 1.35C13.4892 1.62 13.3192 1.92 13.1992 2.23C13.1792 2.26 13.1692 2.29 13.1692 2.32C13.1292 2.43 13.0892 2.54 13.0592 2.65C13.0192 2.82 12.9892 3 12.9692 3.17C12.9592 3.29 12.9492 3.41 12.9492 3.53C12.9492 5.47 14.5292 7.05 16.4692 7.05C16.5892 7.05 16.7092 7.04 16.8292 7.03C16.9992 7.01 17.1792 6.98 17.3492 6.94C17.4592 6.91 17.5692 6.87 17.6792 6.83C17.7092 6.83 17.7392 6.82 17.7692 6.8C18.0792 6.68 18.3792 6.51 18.6492 6.3C18.8092 6.17 18.9692 6.03 19.0992 5.87C19.6792 5.23 19.9992 4.4 19.9992 3.53C19.9992 1.58 18.4192 0 16.4692 0Z",fill:"#B67AFF"})),We||(We=r.createElement("path",{d:"M13.77 18.73C13.75 18.7 13.72 18.68 13.7 18.65C13.49 18.38 13.32 18.08 13.2 17.77C13.21 17.8 13.22 17.83 13.23 17.86C11.22 18.7 8.82 18.71 6.77 17.86C6.78 17.83 6.79 17.8 6.8 17.77C6.68 18.08 6.51 18.38 6.3 18.65C6.17 18.81 6.03 18.97 5.87 19.1C7.15 19.69 8.57 20 10 20C11.46 20 12.85 19.7 14.14 19.1C14.01 19 13.88 18.87 13.77 18.73ZM1.5 10C1.5 8.89 1.72 7.78 2.14 6.77C2.15 6.77 2.17 6.78 2.18 6.78C2.06 6.73 1.93 6.67 1.82 6.61C1.66 6.52 1.5 6.42 1.35 6.3C1.19 6.17 1.03 6.03 0.9 5.87C0.31 7.15 0 8.57 0 10C0 11.46 0.3 12.85 0.9 14.14C1 14.01 1.13 13.88 1.27 13.77C1.3 13.75 1.32 13.72 1.35 13.7C1.62 13.49 1.92 13.32 2.23 13.2C2.2 13.21 2.17 13.22 2.14 13.23C1.71 12.22 1.5 11.13 1.5 10ZM19.1 5.87C18.97 6.03 18.81 6.17 18.65 6.3C18.38 6.51 18.08 6.68 17.77 6.8C17.8 6.79 17.83 6.78 17.86 6.77C18.28 7.78 18.5 8.89 18.5 10C18.5 11.13 18.29 12.22 17.86 13.23C17.83 13.22 17.8 13.21 17.77 13.2C18.08 13.32 18.38 13.49 18.65 13.7C18.68 13.72 18.71 13.75 18.73 13.77C18.87 13.88 19 14.01 19.1 14.14C19.7 12.85 20 11.46 20 10C20 8.57 19.69 7.15 19.1 5.87ZM10 0C8.57 0 7.15 0.31 5.87 0.9C6.03 1.03 6.17 1.19 6.3 1.35C6.42 1.5 6.52 1.66 6.61 1.82C6.67 1.93 6.73 2.06 6.78 2.18C6.78 2.17 6.77 2.15 6.77 2.14C8.81 1.29 11.22 1.3 13.23 2.14C13.22 2.17 13.21 2.2 13.2 2.23C13.32 1.92 13.49 1.62 13.7 1.35C13.72 1.32 13.75 1.29 13.77 1.27C13.88 1.13 14.01 1 14.14 0.9C12.85 0.3 11.46 0 10 0Z",fill:"#B9F8FD"})))}const Ze=r.forwardRef(Ke);n.p;var _e,Ye,Ve,He,Ue;function Ge(){return Ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ge.apply(this,arguments)}function $e(e,t){let{title:n,titleId:a,...s}=e;return r.createElement("svg",Ge({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,_e||(_e=r.createElement("path",{d:"M17.9707 8V16C17.9707 19 16.9707 20 13.9707 20H5.9707C2.9707 20 1.9707 19 1.9707 16V8H17.9707Z",fill:"#B9F8FD"})),Ye||(Ye=r.createElement("path",{d:"M19.5 5V6C19.5 7.1 18.97 8 17.5 8H2.5C0.97 8 0.5 7.1 0.5 6V5C0.5 3.9 0.97 3 2.5 3H17.5C18.97 3 19.5 3.9 19.5 5Z",fill:"#B67AFF"})),Ve||(Ve=r.createElement("path",{d:"M9.64076 2.99994H4.12076C3.78076 2.62994 3.79076 2.05994 4.15076 1.69994L5.57076 0.279941C5.94076 -0.0900586 6.55076 -0.0900586 6.92076 0.279941L9.64076 2.99994Z",fill:"#B67AFF"})),He||(He=r.createElement("path",{d:"M15.8696 2.99994H10.3496L13.0696 0.279941C13.4396 -0.0900586 14.0496 -0.0900586 14.4196 0.279941L15.8396 1.69994C16.1996 2.05994 16.2096 2.62994 15.8696 2.99994Z",fill:"#B67AFF"})),Ue||(Ue=r.createElement("path",{d:"M6.93945 8V13.14C6.93945 13.94 7.81945 14.41 8.48945 13.98L9.42945 13.36C9.76945 13.14 10.1995 13.14 10.5295 13.36L11.4195 13.96C12.0795 14.4 12.9695 13.93 12.9695 13.13V8H6.93945Z",fill:"#B67AFF"})))}const Xe=r.forwardRef($e);n.p;var Je,qe,Qe;function et(){return et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},et.apply(this,arguments)}function tt(e,t){let{title:n,titleId:a,...s}=e;return r.createElement("svg",et({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,Je||(Je=r.createElement("path",{d:"M16.9869 7.05346C16.9869 8.51454 16.5577 9.85471 15.8193 10.9732C14.7415 12.5854 13.035 13.724 11.0491 14.0162C10.7098 14.0767 10.3605 14.1069 10.0012 14.1069C9.64198 14.1069 9.2927 14.0767 8.9534 14.0162C6.96749 13.724 5.261 12.5854 4.18322 10.9732C3.44474 9.85471 3.01562 8.51454 3.01562 7.05346C3.01562 3.15391 6.13919 0 10.0012 0C13.8633 0 16.9869 3.15391 16.9869 7.05346Z",fill:"#B9F8FD"})),qe||(qe=r.createElement("path",{d:"M19.231 16.5955L17.5844 16.9884C17.2151 17.0791 16.9257 17.3613 16.8459 17.7341L16.4966 19.2153C16.307 20.0214 15.2891 20.2633 14.7602 19.6285L10 14.1066L5.2398 19.6385C4.71089 20.2733 3.69298 20.0315 3.50337 19.2254L3.15409 17.7441C3.06428 17.3713 2.77487 17.0791 2.41561 16.9985L0.769003 16.6055C0.0105648 16.4242 -0.258881 15.4669 0.28999 14.9127L4.18198 10.9829C5.25976 12.5951 6.96625 13.7338 8.95216 14.026C9.29146 14.0865 9.64074 14.1167 10 14.1167C10.3593 14.1167 10.7085 14.0865 11.0478 14.026C13.0338 13.7338 14.7402 12.5951 15.818 10.9829L19.71 14.9127C20.2589 15.4568 19.9894 16.4141 19.231 16.5955Z",fill:"#B67AFF"})),Qe||(Qe=r.createElement("path",{d:"M10.5798 4.01052L11.1686 5.19953C11.2484 5.36075 11.458 5.52198 11.6476 5.55221L12.7154 5.73357C13.394 5.84441 13.5537 6.34824 13.0647 6.84198L12.2364 7.67831C12.0967 7.81938 12.0168 8.09145 12.0667 8.29298L12.3062 9.33085C12.4958 10.147 12.0667 10.4695 11.3482 10.0362L10.3503 9.44167C10.1706 9.33083 9.87124 9.33083 9.69161 9.44167L8.69367 10.0362C7.97515 10.4594 7.54603 10.147 7.73564 9.33085L7.97515 8.29298C8.01506 8.10153 7.94521 7.81938 7.8055 7.67831L6.9772 6.84198C6.48821 6.34824 6.64788 5.85449 7.32648 5.73357L8.39428 5.55221C8.57391 5.52198 8.78348 5.36075 8.86332 5.19953L9.45211 4.01052C9.74151 3.36563 10.2604 3.36563 10.5798 4.01052Z",fill:"#B67AFF"})))}const nt=r.forwardRef(tt),rt=(n.p,[{label:(0,f.jsxs)(o.Space,{className:"space-middle-icon",children:[(0,f.jsx)(d.Z,{style:{fontSize:20},component:Ze}),(0,f.jsx)(o.Typography.Text,{children:"Spin"})]}),value:y.Spin},{label:(0,f.jsxs)(o.Space,{className:"space-middle-icon",children:[(0,f.jsx)(d.Z,{style:{fontSize:20},component:Xe}),(0,f.jsx)(o.Typography.Text,{children:"Reward"})]}),value:y.Reward},{label:(0,f.jsxs)(o.Space,{className:"space-middle-icon",children:[(0,f.jsx)(d.Z,{style:{fontSize:20},component:nt}),(0,f.jsx)(o.Typography.Text,{children:"Challenge"})]}),value:y.Challenge}]),at=()=>{const e=(0,a.useSelector)((e=>e.main.tabId)),t=(0,a.useDispatch)();return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)(ke,{children:(0,f.jsxs)(o.Row,{gutter:[32,32],style:{paddingBottom:24},children:[(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.Segmented,{value:e,onChange:e=>t(H({tabId:e.toString()})),options:rt,size:"large"})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(be,{tabId:e})})]})}),e===y.Challenge&&(0,f.jsx)(Me,{})]})};var st=n(2582),it=n(10240);const lt=e=>{let{perViews:t=4,spacing:n=0,speed:r=9e3,data:a=[],height:i=240}=e;const l=G(),c=M(l);return(0,f.jsx)(it.tq,{modules:[st.pt,st.oM],slidesPerView:t,spaceBetween:n,autoplay:{delay:0,disableOnInteraction:!1,reverseDirection:!1},speed:r,loop:!0,className:"apps-slide-infinite",children:Object.keys(c).length&&a.map(((e,t)=>{let{authority:n,rewardAddress:r}=e;return(0,f.jsx)(it.o5,{style:{height:i},children:(0,f.jsxs)(o.Space,{children:[(0,f.jsxs)(o.Typography.Text,{children:[s.util.shortenAddress(n)," won"]}),(0,f.jsxs)(o.Typography.Text,{style:{color:"#B67AFF"},children:[(0,f.jsx)(b,{rewardAddress:r})," ",(0,f.jsx)(P,{rewardAddress:r})]})]})},t)}))})},ct=()=>{const e=G(),t=B(e,!1),n=(0,s.useWidth)(),a=(0,r.useMemo)((()=>{let e=1;return n>685&&(e=3),n>992&&(e=4),n>1200&&(e=5),e}),[n]),i=(0,r.useMemo)((()=>{const e=[];for(const n in t){if(e.length>5)return e;const{state:r,reward:a,authority:s}=t[n];(r.won||r.claimed)&&e.push({authority:s.toBase58(),rewardAddress:a.toBase58()})}return e}),[t]);return i.length?(0,f.jsx)(o.Card,{bordered:!1,style:{borderRadius:50,backdropFilter:" blur(96px)"},bodyStyle:{padding:8},children:(0,f.jsx)(lt,{data:i,perViews:a,height:"auto",spacing:24,speed:12e3})}):null};var ot=n(48744),dt=n.n(ot);var ut=n(97429).Buffer;const pt=()=>{const[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)(""),{onInitializeCampaign:s,loading:i}=(()=>{const[e,t]=(0,r.useState)(!1);return{onInitializeCampaign:(0,r.useCallback)((async e=>{t(!0);try{const{txId:n}=await window.luckyWheel.initializeCampaign({picker:e,startDate:new(dt())(0),endDate:new(dt())(0)});I("Create campaign",n)}catch(n){F(n)}finally{t(!1)}}),[]),loading:e}})();return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)(o.Button,{type:"primary",onClick:()=>t(!0),children:"Create Campaign Now"}),(0,f.jsx)(o.Modal,{title:"Create Campaign",visible:e,onCancel:()=>t(!1),onOk:()=>{s(Array.from(ut.from(n,"hex")))},okText:"Create",confirmLoading:i,children:(0,f.jsxs)(o.Row,{gutter:[12,12],justify:"space-between",children:[(0,f.jsx)(o.Col,{children:(0,f.jsx)(o.Typography.Text,{children:"Picker (Hex):"})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.Input,{value:n,onChange:e=>a(e.target.value),style:{width:"100%"}})}),(0,f.jsx)(o.Col,{span:12,children:(0,f.jsx)(o.Button,{type:"primary",block:!0,onClick:async()=>{const{data:e}=await ie().get(O.api.lottery.publicKey,{withCredentials:!0}),t=await window.luckyWheel.decodePickerPublickey(e);a(ut.from(t).toString("hex"))},children:"Sentre Picker"})}),(0,f.jsx)(o.Col,{span:12,children:(0,f.jsx)(o.Button,{type:"primary",block:!0,onClick:async()=>{const e=Array.from(window.luckyWheel.picker.pubKey);a(ut.from(e.slice(1,65)).toString("hex"))},children:"Default Picker"})})]})})]})},ht=e=>{let{children:t,campaignAddress:n}=e;return(0,a.useSelector)((e=>e.campaigns[n]))?(0,f.jsx)(r.Fragment,{children:t}):(0,f.jsx)(o.Row,{justify:"center",children:(0,f.jsx)(o.Col,{children:(0,f.jsx)(o.Result,{status:"403",title:"Not Found Campaign",subTitle:"Sorry, we not found campaign.",extra:(0,f.jsx)(pt,{})})})})},wt=e=>{let{campaignAddress:t}=e;const[n,a]=(0,r.useState)(""),[s,i]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1);return(0,f.jsx)(o.Popover,{content:(0,f.jsx)(o.Collapse,{defaultActiveKey:["1"],children:(0,f.jsx)(o.Collapse.Panel,{header:"Print Ticket",children:(0,f.jsxs)(o.Row,{gutter:[12,12],justify:"space-between",children:[(0,f.jsx)(o.Col,{children:(0,f.jsx)(o.Typography.Text,{children:"Total Amount:"})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.InputNumber,{value:n,onChange:a,min:"0",style:{width:"100%"}})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.Button,{onClick:async()=>{try{c(!0);const{txId:e}=await window.luckyWheel.printTicketMint({campaign:new S.web3.PublicKey(t),amount:new S.BN(n)});I("Print ticket",e)}catch(e){F(e)}finally{c(!1)}},loading:l,block:!0,type:"primary",children:"Print"})})]})},"1")}),trigger:"click",visible:s,onVisibleChange:i,placement:"bottomLeft",children:(0,f.jsx)(o.Button,{onClick:()=>i(!0),children:"Print Ticket"},"2")})};var xt=n(97429).Buffer;const yt=e=>{let{campaignAddress:t}=e;const[n,a]=(0,r.useState)(""),[i,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),u=(0,s.useWalletAddress)();return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)(o.Button,{type:"primary",onClick:()=>l(!0),children:"Update Picker"}),(0,f.jsx)(o.Modal,{title:"Create Campaign",visible:i,onCancel:()=>l(!1),onOk:async()=>{try{d(!0);const e=await window.luckyWheel.program.methods.updatePicker(Array.from(xt.from(n,"hex"))).accounts({authority:u,campaign:t}).rpc();I("Update picker",e)}catch(e){F(e)}finally{d(!1)}},okText:"Update",confirmLoading:c,children:(0,f.jsxs)(o.Row,{gutter:[12,12],justify:"space-between",children:[(0,f.jsx)(o.Col,{children:(0,f.jsx)(o.Typography.Text,{children:"Picker (Hex):"})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.Input,{value:n,onChange:e=>a(e.target.value),style:{width:"100%"}})}),(0,f.jsx)(o.Col,{span:12,children:(0,f.jsx)(o.Button,{type:"primary",block:!0,onClick:async()=>{const{data:e}=await ie().get(O.api.lottery.publicKey,{withCredentials:!0}),t=await window.luckyWheel.decodePickerPublickey(e);a(xt.from(t).toString("hex"))},children:"Sentre Picker"})}),(0,f.jsx)(o.Col,{span:12,children:(0,f.jsx)(o.Button,{type:"primary",block:!0,onClick:async()=>{const e=Array.from(window.luckyWheel.picker.pubKey);a(xt.from(e.slice(1,65)).toString("hex"))},children:"Default Picker"})})]})})]})};var mt=n(97429).Buffer;const gt=()=>{const e=(0,a.useSelector)((e=>e.campaigns)),[t,n]=(0,r.useState)(""),[i,l]=(0,r.useState)(0),c=(0,s.useWalletAddress)(),d=G(),{to:u}=(0,s.useAppRoute)(O.manifest.appId),p=(0,s.useGetMintData)(),h=(0,a.useDispatch)(),w=e[d],x=t=>{var n;return c===(null===(n=e[t])||void 0===n?void 0:n.authority.toBase58())},y=(0,r.useCallback)((async()=>{const e=(await window.luckyWheel.deriveCampaignPDAs(new S.web3.PublicKey(d))).ticketMint.toBase58();let t=0;try{const n=await p({mintAddress:e});void 0!==n&&(t=Number(n[e].supply.toString()))}catch(r){}return l(t),n(e)}),[p,d]);return(0,r.useEffect)((()=>{y()}),[y]),(0,f.jsx)(o.PageHeader,{ghost:!1,onBack:()=>u("/dashboard"),title:"Admin",subTitle:(0,f.jsxs)(o.Space,{children:[d,x(d)?(0,f.jsx)(o.Tag,{color:"success",children:"Your Campaign"}):(0,f.jsx)(o.Tag,{color:"error",children:"Not Have Permission"})]}),style:{backgroundColor:"rgba(255, 255, 255, 0.1)"},extra:[(0,f.jsx)(o.Select,{style:{width:120},onChange:e=>h(Y({campaign:e})),value:d,children:Object.keys(e).map((e=>(0,f.jsx)(o.Select.Option,{value:e,children:(0,f.jsx)(o.Typography.Text,{style:{color:x(e)?void 0:"red"},children:e})},e)))},"3"),(0,f.jsx)(wt,{campaignAddress:d},"PrintTicket"),(0,f.jsx)(yt,{campaignAddress:d},"UpdatePicker"),(0,f.jsx)(pt,{},"CreateCampaign")],children:(0,f.jsxs)(o.Row,{gutter:[24,24],style:{paddingLeft:32},children:[(0,f.jsx)(o.Col,{span:17,children:(0,f.jsxs)(o.Descriptions,{size:"small",column:2,children:[(0,f.jsx)(o.Descriptions.Item,{label:"Address",children:d}),(0,f.jsx)(o.Descriptions.Item,{label:"Ticket Token",children:t}),(0,f.jsx)(o.Descriptions.Item,{label:"Authority",children:s.util.shortenAddress((null===w||void 0===w?void 0:w.authority.toBase58())||"",8)}),(0,f.jsx)(o.Descriptions.Item,{label:"Picker",children:s.util.shortenAddress(mt.from((null===w||void 0===w?void 0:w.picker)||[]).toString("hex"),8)})]})}),(0,f.jsx)(o.Col,{span:"auto",children:(0,f.jsxs)(o.Space,{size:32,children:[(0,f.jsx)(o.Statistic,{title:"Total Ticket",value:null===w||void 0===w?void 0:w.totalTicket.toNumber()}),(0,f.jsx)(o.Statistic,{title:"Total Picked",value:null===w||void 0===w?void 0:w.totalPicked.toNumber()}),(0,f.jsx)(o.Statistic,{title:"Total Ticket Mint",value:i})]})})]})})},Ct=e=>{let{rewardAddress:t}=e;const n=j(t);let r=0;return n&&(r=Number(n.toLuckyNumber.sub(n.fromLuckyNumber))/10**18),(0,f.jsx)("span",{children:s.util.numeric(r).format("0,0.[0000]%")})};var jt=n(95418);const ft="rewards",bt=(0,K.createAsyncThunk)("rewards/initRewards",(async e=>e)),kt=(0,K.createAsyncThunk)("rewards/upsetReward",(async e=>{let{address:t,data:n}=e;if(!jt.account.isAddress(t))throw new Error("Invalid reward address");if(!n)throw new Error("Data is empty");return{[t]:n}})),Tt=(0,K.createAsyncThunk)("rewards/getReward",(async(e,t)=>{let{address:n}=e,{getState:r}=t;const{rewards:{[n]:a}}=r();return{[n]:a}})),vt=(0,K.createSlice)({name:ft,initialState:{},reducers:{},extraReducers:e=>{e.addCase(bt.fulfilled,((e,t)=>{let{payload:n}=t;return n})).addCase(kt.fulfilled,((e,t)=>{let{payload:n}=t;Object.assign(e,n)}))}}).reducer,At=()=>{const[e,t]=(0,r.useState)(!1),n=(0,a.useDispatch)();return{withdrawReward:async e=>{let{totalPrize:r,reward:a,mint:s}=e;t(!0);const{[a]:i}=await n(Tt({address:a})).unwrap();try{const{txId:e}=await window.luckyWheel.withdrawReward({campaign:i.campaign,reward:new S.web3.PublicKey(a),totalPrize:new S.BN(r),mint:new S.web3.PublicKey(s)});I("Withdraw reward",e)}catch(l){F(l)}finally{t(!1)}},loading:e}},St=e=>{let{rewardAddress:t}=e;const[n,a]=(0,r.useState)("0"),s=j(t),{withdrawReward:i,loading:l}=At();return(0,f.jsxs)(o.Row,{gutter:[12,12],justify:"space-between",children:[(0,f.jsx)(o.Col,{children:(0,f.jsx)(o.Typography.Text,{children:"Total Prize:"})}),(0,f.jsx)(o.Col,{span:"auto",children:(0,f.jsx)(o.Space,{children:(0,f.jsxs)(o.Typography.Text,{type:"secondary",children:["Available: ",s.reservePrize.toNumber()]})})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.InputNumber,{value:n,onChange:a,min:"0",style:{width:"100%"}})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.Button,{onClick:async()=>{await i({totalPrize:Number(n),mint:s.mint.toBase58(),reward:t})},block:!0,type:"primary",loading:l,children:"Withdraw"})})]})},Rt=()=>{const e=(0,a.useDispatch)(),t=(0,r.useCallback)((async t=>{const n=t.toString(),{[n]:r}=await e(Tt({address:n})).unwrap(),{rewardTreasurer:a}=await window.luckyWheel.deriveRewardPDAs(new S.web3.PublicKey(t),r.mint),s=window.sentre.splt,{value:i}=await s.connection.getTokenAccountsByOwner(a,{programId:s.spltProgramId});return i.map((e=>s.parseAccountData(e.account.data))).filter((e=>Number(e.amount.toString())>0))}),[e]);return t},Nt=e=>{let{rewardAddress:t}=e;const{withdrawReward:n}=At(),r=Rt();return(0,f.jsx)(o.Button,{onClick:async()=>{const e=await r(t);await n({totalPrize:1,mint:e[0].mint,reward:t})},block:!0,type:"primary",children:"Withdraw 1 NFT"})},Pt=e=>{let{rewardAddress:t}=e;return j(t).rewardType.nftCollection?(0,f.jsx)(Nt,{rewardAddress:t}):(0,f.jsx)(St,{rewardAddress:t})},Bt=()=>{const[e,t]=(0,r.useState)(!1);return{onDepositReward:async e=>{let{mint:n,campaign:r,totalPrize:a,reward:s}=e;t(!0);try{const{txId:e}=await window.luckyWheel.depositReward({campaign:new S.web3.PublicKey(r),reward:new S.web3.PublicKey(s),totalPrize:new S.BN(a),mint:new S.web3.PublicKey(n)});I("Deposit reward",e)}catch(i){F(i)}finally{t(!1)}},loading:e}},It=e=>{let{rewardAddress:t}=e;const[n,a]=(0,r.useState)("0"),s=j(t),{onDepositReward:i,loading:l}=Bt();return(0,f.jsxs)(o.Row,{gutter:[12,12],justify:"space-between",children:[(0,f.jsx)(o.Col,{children:(0,f.jsx)(o.Typography.Text,{children:"Total Prize:"})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.InputNumber,{value:n,onChange:a,min:"0",style:{width:"100%"}})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.Button,{onClick:async()=>{await i({campaign:s.campaign.toBase58(),reward:t,mint:s.mint.toBase58(),totalPrize:Number(n)})},block:!0,type:"primary",loading:l,children:"Deposit"})})]})},Ft=e=>{let{rewardAddress:t}=e;const{onDepositReward:n}=Bt(),r=j(t);return(0,f.jsx)(N.NFTSelection,{collectionAddress:[r.mint.toBase58()],onSelect:async e=>{await n({campaign:r.campaign.toBase58(),reward:t,mint:e,totalPrize:1})}})},Mt=e=>{let{rewardAddress:t}=e;return j(t).rewardType.nftCollection?(0,f.jsx)(Ft,{rewardAddress:t}):(0,f.jsx)(It,{rewardAddress:t})},zt=e=>{let{rewardAddress:t}=e;const[n,a]=(0,r.useState)(!1),[s,i]=(0,r.useState)(""),l=j(t),{updateRatio:c,loading:d}=(()=>{const[e,t]=(0,r.useState)(!1);return{updateRatio:async e=>{let{campaign:n,rewardAddress:r,ratio:a}=e;t(!0);try{const e=new S.BN("1"+"0".repeat(18)).mul(new S.BN(a*10**9)).div(new S.BN(100*10**9)),{txId:s}=await window.luckyWheel.updateLuckyRatio({reward:new S.web3.PublicKey(r),campaign:new S.web3.PublicKey(n),fromLuckyNumber:new S.BN(0),toLuckyNumber:e});I("Update ratio",s)}catch(s){return F(s)}finally{t(!1)}},loading:e}})();return(0,f.jsx)(o.Popover,{content:(0,f.jsxs)(o.Collapse,{defaultActiveKey:["1"],children:[(0,f.jsx)(o.Collapse.Panel,{header:"Update Ratio",children:(0,f.jsxs)(o.Row,{gutter:[12,12],justify:"space-between",children:[(0,f.jsx)(o.Col,{children:(0,f.jsx)(o.Typography.Text,{children:"New Ratio:"})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.InputNumber,{value:s,onChange:i,min:"0.0000000000000001",style:{width:"100%"}})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.Button,{onClick:()=>{c({campaign:l.campaign.toBase58(),rewardAddress:t,ratio:Number(s)})},loading:d,block:!0,type:"primary",children:"Update"})})]})},"1"),(0,f.jsx)(o.Collapse.Panel,{header:"Deposit",children:(0,f.jsx)(Mt,{rewardAddress:t})},"2"),(0,f.jsx)(o.Collapse.Panel,{header:"Withdraw",children:(0,f.jsx)(Pt,{rewardAddress:t})},"Withdraw")]}),trigger:"click",visible:n,onVisibleChange:a,placement:"bottomLeft",children:(0,f.jsx)(o.Button,{onClick:()=>a(!n),children:(0,f.jsx)(Q.default,{name:"create-outline"})})})},Et=[{title:"Avatar",dataIndex:"address",key:"address",render:e=>(0,f.jsxs)(o.Space,{children:[(0,f.jsx)(A,{rewardAddress:e,size:32}),(0,f.jsx)(P,{rewardAddress:e})]})},{title:"Prize Amount",dataIndex:"address",key:"address",render:e=>(0,f.jsx)(b,{rewardAddress:e})},{title:"Total Prize",dataIndex:"totalPrize",key:"totalPrize",render:e=>(0,f.jsx)(o.Typography,{children:e.toNumber()})},{title:"Reserve Prize",dataIndex:"reservePrize",key:"reservePrize",render:e=>(0,f.jsx)(o.Typography,{children:e.toNumber()})},{title:"Ratio",dataIndex:"address",key:"address",render:e=>(0,f.jsx)(o.Typography.Text,{children:(0,f.jsx)(Ct,{rewardAddress:e})})},{title:"Action",dataIndex:"address",key:"address",render:e=>(0,f.jsx)(zt,{rewardAddress:e})}],Lt=e=>{let{title:t,actionCreate:n,data:r}=e;return(0,f.jsx)(o.Row,{justify:"center",children:(0,f.jsx)(o.Col,{xs:24,lg:16,children:(0,f.jsx)(o.Table,{className:"reward",title:()=>(0,f.jsxs)(o.Row,{justify:"space-between",children:[(0,f.jsx)(o.Col,{children:(0,f.jsx)(o.Typography.Title,{level:4,style:{fontWeight:"bold"},children:t})}),(0,f.jsx)(o.Col,{children:n})]}),columns:Et,dataSource:r,bordered:!1,pagination:!1,style:{width:"100%"}},t)})})};var Dt=n(95880),Wt=n.n(Dt);const Ot=e=>{let{setCollection:t}=e;const[n,a]=(0,r.useState)(!1);return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)(o.Button,{onClick:()=>a(!0),children:"Select NFT"}),(0,f.jsx)(o.Modal,{visible:n,onCancel:()=>a(!1),footer:null,children:(0,f.jsx)(N.SearchNFT,{onSelect:e=>{t(e),a(!1)},searchNFTby:N.searchNFTType.collections})})]})},Kt=()=>{const[e,t]=(0,r.useState)(!1),n=(0,r.useCallback)((async e=>{let{prizeAmount:n,campaign:r,ratio:a,rewardType:s,rewardMint:i}=e;t(!0);try{const e=new S.web3.PublicKey(r),l=S.web3.Keypair.generate(),{tx:c}=await window.luckyWheel.initializeReward({campaign:e,rewardMint:new S.web3.PublicKey(i),prizeAmount:n,rewardType:s,reward:l,sendAndConfirm:!1}),o=new S.BN("1"+"0".repeat(18)).mul(new S.BN(a*10**9)).div(new S.BN(100*10**9)),{tx:d}=await window.luckyWheel.updateLuckyRatio({campaign:new S.web3.PublicKey(r),reward:l.publicKey,fromLuckyNumber:new S.BN(0),toLuckyNumber:o,sendAndConfirm:!1}),u=new S.web3.Transaction;u.add(c),u.add(d);const p=await window.luckyWheel.provider.sendAndConfirm(u,[l]);I("Create reward",p)}catch(l){F(l)}finally{t(!1)}}),[]);return{createReward:n,loading:e}},Zt=e=>{let{campaignAddress:t}=e;const[n,a]=(0,r.useState)(!1),[s,i]=(0,r.useState)("0"),[l,c]=(0,r.useState)(""),{createReward:d,loading:u}=Kt();return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)(o.Button,{block:!0,type:"primary",onClick:()=>a(!0),children:"Add New"}),(0,f.jsx)(o.Modal,{title:"Create NFT Reward",visible:n,onCancel:()=>a(!1),onOk:async()=>{await d({prizeAmount:new S.BN(1),campaign:t,rewardMint:l,ratio:Number(s),rewardType:Dt.REWARD_TYPE.nftCollection})},confirmLoading:u,children:(0,f.jsxs)(o.Row,{gutter:[24,24],children:[(0,f.jsx)(o.Col,{span:10,children:(0,f.jsx)(o.Typography.Text,{children:"Prize Amount :"})}),(0,f.jsx)(o.Col,{span:14,children:(0,f.jsx)(o.Typography.Text,{children:"1 NFT"})}),(0,f.jsx)(o.Col,{span:10,children:(0,f.jsx)(o.Typography.Text,{children:"Ratio (%) :"})}),(0,f.jsx)(o.Col,{span:14,children:(0,f.jsx)(o.InputNumber,{style:{width:"100%"},min:"0",max:"100",value:s,onChange:e=>i(e)})}),(0,f.jsx)(o.Col,{span:10,children:(0,f.jsx)(o.Typography.Text,{children:"Collection :"})}),(0,f.jsx)(o.Col,{span:14,children:(0,f.jsxs)(o.Space,{direction:"vertical",children:[(0,f.jsx)(Ot,{setCollection:c}),l&&(0,f.jsx)(N.AvatarNFT,{mintAddress:l})]})})]})})]})},_t=()=>{const e=G(),t=M(e),n=Object.keys(t).filter((e=>!!t[e].rewardType.nftCollection)).map((e=>({address:e,...t[e]})));return(0,f.jsx)(Lt,{data:n,title:"NFT Rewards",actionCreate:(0,f.jsx)(Zt,{campaignAddress:e})})},Yt=e=>{let{campaignAddress:t}=e;const[n,a]=(0,r.useState)(!1),[s,i]=(0,r.useState)("0"),[l,c]=(0,r.useState)("0"),{createReward:d,loading:u}=Kt();return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)(o.Button,{block:!0,type:"primary",onClick:()=>a(!0),children:"Add New"}),(0,f.jsxs)(o.Modal,{title:"Create Ticket Reward",visible:n,onCancel:()=>a(!1),onOk:async()=>{const e=await window.luckyWheel.deriveCampaignPDAs(new S.web3.PublicKey(t));await d({prizeAmount:new S.BN(s),campaign:t,rewardMint:e.ticketMint,ratio:Number(l),rewardType:Dt.REWARD_TYPE.ticket})},confirmLoading:u,children:[(0,f.jsx)(o.Row,{justify:"center",style:{paddingBottom:16},children:(0,f.jsx)(o.Col,{children:(0,f.jsx)(o.Image,{preview:!1,style:{height:100,width:100},src:v})})}),(0,f.jsxs)(o.Row,{gutter:[24,24],children:[(0,f.jsx)(o.Col,{span:10,children:(0,f.jsx)(o.Typography.Text,{children:"Prize Amount :"})}),(0,f.jsx)(o.Col,{span:14,children:(0,f.jsx)(o.Input,{style:{width:"100%"},min:"0",value:s,onChange:e=>i(e.target.value)})}),(0,f.jsx)(o.Col,{span:10,children:(0,f.jsx)(o.Typography.Text,{children:"Ratio (%) :"})}),(0,f.jsx)(o.Col,{span:14,children:(0,f.jsx)(o.InputNumber,{style:{width:"100%"},min:"0",max:"100",value:l,onChange:e=>c(e)})})]})]})]})},Vt=()=>{const e=G(),t=M(e),n=Object.keys(t).filter((e=>!!t[e].rewardType.ticket)).map((e=>({address:e,...t[e]})));return(0,f.jsx)(Lt,{data:n,title:"Ticket Rewards",actionCreate:(0,f.jsx)(Yt,{campaignAddress:e})})};var Ht=n(4065),Ut=n(70457);const Gt=e=>{let{campaignAddress:t}=e;const[n,a]=(0,r.useState)(!1),[i,l]=(0,r.useState)("0"),[c,d]=(0,r.useState)("0"),[u,p]=(0,r.useState)(""),{createReward:h,loading:w}=Kt(),x=(0,s.useGetMintDecimals)();return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)(o.Button,{block:!0,type:"primary",onClick:()=>a(!0),children:"Add New"}),(0,f.jsx)(o.Modal,{title:"Create Token Reward",visible:n,onCancel:()=>a(!1),onOk:async()=>{const e=await x({mintAddress:u});if(!e)throw new Error("Cant not find decimals");const n=Ht.utilsBN.decimalize(i,e);await h({prizeAmount:n,campaign:t,rewardMint:u,ratio:Number(c),rewardType:Dt.REWARD_TYPE.token})},confirmLoading:w,children:(0,f.jsxs)(o.Row,{gutter:[24,24],children:[(0,f.jsx)(o.Col,{span:10,children:(0,f.jsx)(o.Typography.Text,{children:"Token :"})}),(0,f.jsx)(o.Col,{span:14,children:(0,f.jsx)(Ut.Z,{onChange:p})}),(0,f.jsx)(o.Col,{span:10,children:(0,f.jsx)(o.Typography.Text,{children:"Prize Amount :"})}),(0,f.jsx)(o.Col,{span:14,children:(0,f.jsx)(o.Input,{style:{width:"100%"},min:"0",value:i,onChange:e=>l(e.target.value)})}),(0,f.jsx)(o.Col,{span:10,children:(0,f.jsx)(o.Typography.Text,{children:"Ratio (%) :"})}),(0,f.jsx)(o.Col,{span:14,children:(0,f.jsx)(o.InputNumber,{style:{width:"100%"},min:"0",max:"100",value:c,onChange:e=>d(e)})})]})})]})},$t=()=>{const e=G(),t=M(e),n=Object.keys(t).filter((e=>!!t[e].rewardType.token)).map((e=>({address:e,...t[e]})));return(0,f.jsx)(Lt,{data:n,title:"Token Rewards",actionCreate:(0,f.jsx)(Gt,{campaignAddress:e})})},Xt=()=>(0,f.jsxs)(o.Row,{gutter:[24,24],children:[(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)($t,{})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(_t,{})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(Vt,{})})]});var Jt=n(63396);const qt=e=>{let{rewardAddress:t}=e;const[n,a]=(0,r.useState)("0"),s=j(t),{withdrawReward:i,loading:l}=At();return(0,f.jsxs)(o.Row,{gutter:[12,12],justify:"space-between",children:[(0,f.jsx)(o.Col,{children:(0,f.jsx)(o.Typography.Text,{children:"Total Prize:"})}),(0,f.jsx)(o.Col,{span:"auto",children:(0,f.jsx)(o.Space,{children:(0,f.jsxs)(o.Typography.Text,{type:"secondary",children:["Available: ",s.reservePrize.toNumber()]})})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.InputNumber,{value:n,onChange:a,min:"0",style:{width:"100%"}})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.Button,{onClick:async()=>{await i({totalPrize:Number(n),mint:s.mint.toBase58(),reward:t})},block:!0,type:"primary",loading:l,children:"Withdraw"})})]})},Qt=e=>{let{rewardAddress:t}=e;const{withdrawReward:n}=At(),r=Rt();return(0,f.jsx)(o.Button,{onClick:async()=>{const e=await r(t);await n({totalPrize:1,mint:e[0].mint,reward:t})},block:!0,type:"primary",children:"Withdraw 1 NFT"})},en=e=>{let{rewardAddress:t}=e;return j(t).rewardType.nftCollection?(0,f.jsx)(Qt,{rewardAddress:t}):(0,f.jsx)(qt,{rewardAddress:t})},tn=e=>{let{challengeRewardAddress:t}=e;const[n,s]=(0,r.useState)("0"),i=(e=>(0,a.useSelector)((t=>t.challengeRewards[e])))(t),{onDepositChallengeReward:l,loading:c}=(()=>{const[e,t]=(0,r.useState)(!1);return{onDepositChallengeReward:async e=>{let{mint:n,campaign:r,amount:a,challengeReward:s}=e;t(!0);try{const{txId:e}=await window.luckyWheel.depositChallengeReward({campaign:new S.web3.PublicKey(r),challengeReward:new S.web3.PublicKey(s),amount:new S.BN(a),rewardMint:new S.web3.PublicKey(n)});I("Deposit reward",e)}catch(i){F(i)}finally{t(!1)}},loading:e}})();return(0,f.jsxs)(o.Row,{gutter:[12,12],justify:"space-between",children:[(0,f.jsx)(o.Col,{children:(0,f.jsx)(o.Typography.Text,{children:"amount:"})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.InputNumber,{value:n,onChange:s,min:"0",style:{width:"100%"}})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.Button,{onClick:async()=>{await l({campaign:i.campaign.toBase58(),challengeReward:t,mint:i.mint.toBase58(),amount:Number(n)})},block:!0,type:"primary",loading:c,children:"Deposit"})})]})},nn=e=>{let{rewardAddress:t}=e;const{onDepositReward:n}=Bt(),r=j(t);return(0,f.jsx)(N.NFTSelection,{collectionAddress:[r.mint.toBase58()],onSelect:async e=>{await n({campaign:r.campaign.toBase58(),reward:t,mint:e,totalPrize:1})}})},rn=e=>{let{challengeRewardAddress:t}=e;return(0,a.useSelector)((e=>e.challengeRewards[t])).rewardType.nftCollection?(0,f.jsx)(nn,{rewardAddress:t}):(0,f.jsx)(tn,{challengeRewardAddress:t})},an=e=>{let{rewardAddress:t}=e;const[n,a]=(0,r.useState)(!1);return(0,f.jsx)(o.Popover,{content:(0,f.jsxs)(o.Collapse,{defaultActiveKey:["1"],children:[(0,f.jsx)(o.Collapse.Panel,{header:"Deposit",children:(0,f.jsx)(rn,{challengeRewardAddress:t})},"1"),(0,f.jsx)(o.Collapse.Panel,{header:"Withdraw",children:(0,f.jsx)(en,{rewardAddress:t})},"Withdraw")]}),trigger:"click",visible:n,onVisibleChange:a,placement:"bottomLeft",children:(0,f.jsx)(o.Button,{onClick:()=>a(!n),children:(0,f.jsx)(Q.default,{name:"create-outline"})})})},sn=[{title:"Avatar",dataIndex:"mint",key:"mint",render:e=>(0,f.jsxs)(o.Space,{children:[(0,f.jsx)(k.Z,{mintAddress:e.toBase58(),size:32}),(0,f.jsx)(Jt.Z,{mintAddress:e.toBase58()})]})},{title:"Amount",dataIndex:"mint",key:"mint",render:(e,t)=>{let{amount:n}=t;return(0,f.jsx)(h.Z,{mintAddress:e.toBase58(),amount:n})}},{title:"Reserve",dataIndex:"reserve",key:"reserve",render:e=>(0,f.jsx)(o.Typography,{children:e.toNumber()})},{title:"Total Picked",dataIndex:"totalPicked",key:"totalPicked",render:e=>(0,f.jsx)(o.Typography,{children:e.toNumber()})},{title:"Action",dataIndex:"address",key:"address",render:e=>(0,f.jsx)(an,{rewardAddress:e})}],ln=e=>{let{title:t,actionCreate:n,data:r}=e;return(0,f.jsx)(o.Row,{justify:"center",children:(0,f.jsx)(o.Col,{xs:24,lg:16,children:(0,f.jsx)(o.Table,{className:"reward",title:()=>(0,f.jsxs)(o.Row,{justify:"space-between",children:[(0,f.jsx)(o.Col,{children:(0,f.jsx)(o.Typography.Title,{level:4,style:{fontWeight:"bold"},children:t})}),(0,f.jsx)(o.Col,{children:n})]}),columns:sn,dataSource:r,bordered:!1,pagination:!1,style:{width:"100%"},rowKey:e=>e.address},t)})})},cn=e=>{let{setCollection:t}=e;const[n,a]=(0,r.useState)(!1);return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)(o.Button,{onClick:()=>a(!0),children:"Select NFT"}),(0,f.jsx)(o.Modal,{visible:n,onCancel:()=>a(!1),footer:null,children:(0,f.jsx)(N.SearchNFT,{onSelect:e=>{t(e),a(!1)},searchNFTby:N.searchNFTType.collections})})]})},on=()=>{const[e,t]=(0,r.useState)(!1);return{createChallengeReward:(0,r.useCallback)((async e=>{let{amount:n,campaign:r,totalPicked:a,rewardType:s,rewardMint:i}=e;t(!0);try{const e=new S.web3.PublicKey(r),l=S.web3.Keypair.generate(),{txId:c}=await window.luckyWheel.initializeChallengeReward({campaign:e,rewardMint:new S.web3.PublicKey(i),amount:n,rewardType:s,challengeReward:l,totalPicked:a,sendAndConfirm:!0});I("Created Challenge reward",c)}catch(l){F(l)}finally{t(!1)}}),[]),loading:e}},dn=e=>{let{campaignAddress:t}=e;const[n,a]=(0,r.useState)(!1),[s,i]=(0,r.useState)("0"),[l,c]=(0,r.useState)(""),{createChallengeReward:d,loading:u}=on();return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)(o.Button,{block:!0,type:"primary",onClick:()=>a(!0),children:"Add New"}),(0,f.jsx)(o.Modal,{title:"Create NFT Reward",visible:n,onCancel:()=>a(!1),onOk:async()=>{await d({totalPicked:new S.BN(1),campaign:t,rewardMint:l,rewardType:Dt.REWARD_TYPE.nftCollection,amount:new S.BN(1)})},confirmLoading:u,children:(0,f.jsxs)(o.Row,{gutter:[24,24],children:[(0,f.jsx)(o.Col,{span:10,children:(0,f.jsx)(o.Typography.Text,{children:"Prize Amount :"})}),(0,f.jsx)(o.Col,{span:14,children:(0,f.jsx)(o.Typography.Text,{children:"1 NFT"})}),(0,f.jsx)(o.Col,{span:10,children:(0,f.jsx)(o.Typography.Text,{children:"Ratio (%) :"})}),(0,f.jsx)(o.Col,{span:14,children:(0,f.jsx)(o.InputNumber,{style:{width:"100%"},min:"0",max:"100",value:s,onChange:e=>i(e)})}),(0,f.jsx)(o.Col,{span:10,children:(0,f.jsx)(o.Typography.Text,{children:"Collection :"})}),(0,f.jsx)(o.Col,{span:14,children:(0,f.jsxs)(o.Space,{direction:"vertical",children:[(0,f.jsx)(cn,{setCollection:c}),l&&(0,f.jsx)(N.AvatarNFT,{mintAddress:l})]})})]})})]})},un=()=>{const e=G();return(0,f.jsx)(ln,{data:[],title:"NFT Rewards",actionCreate:(0,f.jsx)(dn,{campaignAddress:e})})},pn=e=>{let{campaignAddress:t}=e;const[n,a]=(0,r.useState)(!1),[s,i]=(0,r.useState)("0"),[l,c]=(0,r.useState)("0"),{createReward:d,loading:u}=Kt();return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)(o.Button,{block:!0,type:"primary",onClick:()=>a(!0),children:"Add New"}),(0,f.jsxs)(o.Modal,{title:"Create Ticket Reward",visible:n,onCancel:()=>a(!1),onOk:async()=>{const e=await window.luckyWheel.deriveCampaignPDAs(new S.web3.PublicKey(t));await d({prizeAmount:new S.BN(s),campaign:t,rewardMint:e.ticketMint,ratio:Number(l),rewardType:Dt.REWARD_TYPE.ticket})},confirmLoading:u,children:[(0,f.jsx)(o.Row,{justify:"center",style:{paddingBottom:16},children:(0,f.jsx)(o.Col,{children:(0,f.jsx)(o.Image,{preview:!1,style:{height:100,width:100},src:v})})}),(0,f.jsxs)(o.Row,{gutter:[24,24],children:[(0,f.jsx)(o.Col,{span:10,children:(0,f.jsx)(o.Typography.Text,{children:"Prize Amount :"})}),(0,f.jsx)(o.Col,{span:14,children:(0,f.jsx)(o.Input,{style:{width:"100%"},min:"0",value:s,onChange:e=>i(e.target.value)})}),(0,f.jsx)(o.Col,{span:10,children:(0,f.jsx)(o.Typography.Text,{children:"Ratio (%) :"})}),(0,f.jsx)(o.Col,{span:14,children:(0,f.jsx)(o.InputNumber,{style:{width:"100%"},min:"0",max:"100",value:l,onChange:e=>c(e)})})]})]})]})},hn=()=>{const e=G();return(0,f.jsx)(ln,{data:[],title:"Ticket Rewards",actionCreate:(0,f.jsx)(pn,{campaignAddress:e})})},wn=e=>{let{campaignAddress:t}=e;const[n,a]=(0,r.useState)(!1),[i,l]=(0,r.useState)("0"),[c,d]=(0,r.useState)("0"),[u,p]=(0,r.useState)(""),{createChallengeReward:h,loading:w}=on(),x=(0,s.useGetMintDecimals)();return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)(o.Button,{block:!0,type:"primary",onClick:()=>a(!0),children:"Add New"}),(0,f.jsx)(o.Modal,{title:"Create Token Reward",visible:n,onCancel:()=>a(!1),onOk:async()=>{const e=await x({mintAddress:u});if(!e)throw new Error("Cant not find decimals");const n=Ht.utilsBN.decimalize(i,e);await h({amount:n,campaign:t,rewardMint:u,totalPicked:new S.BN(c),rewardType:Dt.REWARD_TYPE.token})},confirmLoading:w,children:(0,f.jsxs)(o.Row,{gutter:[24,24],children:[(0,f.jsx)(o.Col,{span:10,children:(0,f.jsx)(o.Typography.Text,{children:"Token:"})}),(0,f.jsx)(o.Col,{span:14,children:(0,f.jsx)(Ut.Z,{onChange:p})}),(0,f.jsx)(o.Col,{span:10,children:(0,f.jsx)(o.Typography.Text,{children:" Amount:"})}),(0,f.jsx)(o.Col,{span:14,children:(0,f.jsx)(o.Input,{style:{width:"100%"},min:"0",value:i,onChange:e=>l(e.target.value)})}),(0,f.jsx)(o.Col,{span:10,children:(0,f.jsx)(o.Typography.Text,{children:"Total picked:"})}),(0,f.jsx)(o.Col,{span:14,children:(0,f.jsx)(o.InputNumber,{style:{width:"100%"},min:"0",value:c,onChange:e=>d(e)})})]})})]})},xn=()=>{const e=G(),t=Ne(e),n=Object.keys(t).filter((e=>!!t[e].rewardType.token)).map((e=>({address:e,...t[e]})));return(0,f.jsx)(ln,{data:n,title:"Token Rewards",actionCreate:(0,f.jsx)(wn,{campaignAddress:e})})},yn=()=>(0,f.jsxs)(o.Row,{gutter:[24,24],children:[(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(xn,{})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(un,{})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(hn,{})})]}),mn=[{label:"Management Reward",value:"reward"},{label:"Management Challenge Reward",value:"challenge"}],gn=()=>{const[e,t]=(0,r.useState)("reward");return(0,f.jsxs)(o.Row,{gutter:[24,24],justify:"center",children:[(0,f.jsx)(gt,{}),(0,f.jsx)(o.Col,{span:10,children:(0,f.jsx)(o.Segmented,{value:e,onChange:e=>t(e.toString()),options:mn,size:"large"})}),(0,f.jsx)(o.Col,{span:24,children:"challenge"===e?(0,f.jsx)(yn,{}):(0,f.jsx)(Xt,{})})]})},{manifest:{appId:Cn}}=O,jn=e=>{let{children:t}=e;const n=(0,s.useWalletAddress)(),[a,i]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(a)return;const e=(0,Ht.getAnchorProvider)(s.rpc,n,window.sentre.wallet),t=new(Wt())(e,O.sol.programId);window.luckyWheel=t,i(!0)}),[n,a]),a?(0,f.jsx)(r.Fragment,{children:t}):null},fn=()=>(0,f.jsx)("div",{className:"loading-screen",style:{display:"block"},children:(0,f.jsxs)(o.Row,{gutter:[24,24],children:[(0,f.jsx)(o.Col,{span:24,style:{height:256}}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(o.Row,{gutter:[24,24],justify:"center",children:(0,f.jsx)(o.Col,{children:(0,f.jsxs)(o.Space,{direction:"vertical",align:"center",size:32,children:[(0,f.jsx)(o.Spin,{size:"large"}),(0,f.jsx)(o.Typography.Title,{level:5,children:"Welcome to Sen Lucky Wheel. The application is loading..."})]})})})})]})}),bn="campaigns",kn=(0,K.createAsyncThunk)("campaigns/intCampaign",(async e=>e)),Tn=(0,K.createAsyncThunk)("campaigns/upsetCampaign",(async e=>{let{address:t,data:n}=e;if(!jt.account.isAddress(t))throw new Error("Invalid campaign address");if(!n)throw new Error("Data is empty");return{[t]:n}})),vn=(0,K.createSlice)({name:bn,initialState:{},reducers:{},extraReducers:e=>{e.addCase(kn.fulfilled,((e,t)=>{let{payload:n}=t;Object.assign(e,n)})).addCase(Tn.fulfilled,((e,t)=>{let{payload:n}=t;Object.assign(e,n)}))}}).reducer,An=e=>{const{program:t,name:n,filter:a,upset:s,init:i}=e,[l,c]=(0,r.useState)(0),{accountClient:o,connection:d}=(0,r.useMemo)((()=>{var e;const r=null===t||void 0===t||null===(e=t.account)||void 0===e?void 0:e[n];return{accountClient:r,connection:r.provider.connection}}),[n,null===t||void 0===t?void 0:t.account]),u=(0,r.useCallback)((async()=>{try{const e=await o.all(),t={};for(const n of e)t[n.publicKey.toBase58()]=n.account;i(t)}catch(e){F(e)}}),[o,i]),p=(0,r.useCallback)((async()=>{if(l)return;const e=d.onProgramAccountChange(o.programId,(async e=>{const r=e.accountId.toBase58(),a=e.accountInfo.data,i=t.coder.accounts.decode(n,a);s(r,i)}),"confirmed",[{dataSize:o.size},{memcmp:{offset:0,bytes:(0,Ht.encodeIxData)((0,Ht.accountDiscriminator)(n))}},...a]);c(e)}),[o.programId,o.size,d,a,n,t.coder.accounts,s,l]);return(0,r.useEffect)((()=>{u()}),[u]),(0,r.useEffect)((()=>(p(),()=>{(async()=>{l&&(await d.removeProgramAccountChangeListener(l),c(0))})()})),[d,p,l]),(0,f.jsx)(r.Fragment,{})},Sn=[],Rn=()=>{const e=(0,a.useDispatch)(),t=(0,r.useCallback)((t=>e(kn(t))),[e]),n=(0,r.useCallback)(((t,n)=>e(Tn({address:t,data:n}))),[e]);return(0,f.jsx)(An,{program:window.luckyWheel.program,name:"campaign",filter:Sn,init:t,upset:n})},Nn=[],Pn=()=>{const e=(0,a.useDispatch)(),t=(0,r.useCallback)((t=>e(bt(t))),[e]),n=(0,r.useCallback)(((t,n)=>e(kt({address:t,data:n}))),[e]);return(0,f.jsx)(An,{program:window.luckyWheel.program,name:"reward",filter:Nn,init:t,upset:n})},Bn="tickets",In=(0,K.createAsyncThunk)("tickets/initTickets",(async e=>e)),Fn=(0,K.createAsyncThunk)("tickets/upsetTicket",(async e=>{let{address:t,data:n}=e;if(!jt.account.isAddress(t))throw new Error("Invalid reward address");if(!n)throw new Error("Data is empty");return{[t]:n}})),Mn=(0,K.createSlice)({name:Bn,initialState:{},reducers:{},extraReducers:e=>{e.addCase(In.fulfilled,((e,t)=>{let{payload:n}=t;return n})).addCase(Fn.fulfilled,((e,t)=>{let{payload:n}=t;Object.assign(e,n)}))}}).reducer,zn=[],En=()=>{const e=(0,a.useDispatch)(),t=(0,r.useCallback)((t=>e(In(t))),[e]),n=(0,r.useCallback)(((t,n)=>e(Fn({address:t,data:n}))),[e]);return(0,f.jsx)(An,{program:window.luckyWheel.program,name:"ticket",filter:zn,init:t,upset:n})},Ln="lotteryInfo",Dn=(0,K.createAsyncThunk)("lotteryInfo/initLotteryInfo",(async e=>e)),Wn=(0,K.createAsyncThunk)("lotteryInfo/upsetLotteryInfo",(async e=>{let{address:t,data:n}=e;if(!s.util.isAddress(t))throw new Error("Invalid Lottery Info address");if(!n)throw new Error("Data is empty");return{[t]:n}})),On=(0,K.createSlice)({name:Ln,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Dn.fulfilled,((e,t)=>{let{payload:n}=t;Object.assign(e,n)})).addCase(Wn.fulfilled,((e,t)=>{let{payload:n}=t;Object.assign(e,n)}))}}).reducer,Kn=[],Zn=()=>{const e=(0,a.useDispatch)(),t=(0,r.useCallback)((t=>e(Dn(t))),[e]),n=(0,r.useCallback)(((t,n)=>e(Wn({address:t,data:n}))),[e]);return(0,f.jsx)(An,{program:window.luckyWheel.program,name:"lotteryInfo",filter:Kn,init:t,upset:n})},_n="challengeReward",Yn=(0,K.createAsyncThunk)("challengeReward/initChallengeRewards",(async e=>e)),Vn=(0,K.createAsyncThunk)("challengeReward/upsetChallengeReward",(async e=>{let{address:t,data:n}=e;if(!jt.account.isAddress(t))throw new Error("Invalid reward address");if(!n)throw new Error("Data is empty");return{[t]:n}})),Hn=(0,K.createSlice)({name:_n,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Yn.fulfilled,((e,t)=>{let{payload:n}=t;return n})).addCase(Vn.fulfilled,((e,t)=>{let{payload:n}=t;Object.assign(e,n)}))}}).reducer,Un=[],Gn=()=>{const e=(0,a.useDispatch)(),t=(0,r.useCallback)((t=>e(Yn(t))),[e]),n=(0,r.useCallback)(((t,n)=>e(Vn({address:t,data:n}))),[e]);return(0,f.jsx)(An,{program:window.luckyWheel.program,name:"challengeReward",filter:Un,init:t,upset:n})},$n=e=>{let{children:t}=e;const[n,a]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{setTimeout((()=>a(!1)),3e3)}),[]),(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)(Rn,{}),(0,f.jsx)(Pn,{}),(0,f.jsx)(En,{}),(0,f.jsx)(Zn,{}),(0,f.jsx)(Gn,{}),n?(0,f.jsx)(fn,{}):t]})};n(56373);const Xn=()=>{const e=(0,a.useSelector)((e=>e.main.congratulate)),{appRoute:t}=(()=>{const e=(0,i.useLocation)(),t=(0,i.useHistory)(),n=(0,r.useMemo)((()=>new URLSearchParams(e.search)),[e.search]),a=(0,r.useCallback)((e=>n.get(e)),[n]),s=(0,r.useCallback)((e=>{const t=new URLSearchParams;for(const n in e)t.set(n,e[n]);return t.toString()}),[]),l=(0,r.useMemo)((()=>`/app/${Cn}`),[]);return{getQuery:a,generateQuery:s,pushHistory:(0,r.useCallback)((e=>t.push(`${l}${e}`)),[l,t]),appRoute:l}})(),n=G();return(0,f.jsx)(jn,{children:(0,f.jsx)($n,{children:(0,f.jsx)(ht,{campaignAddress:n,children:(0,f.jsxs)(o.Row,{gutter:[24,24],children:[e&&(0,f.jsx)(c(),{style:{zIndex:9999},width:window.innerWidth,height:window.innerHeight,recycle:!1,gravity:.5,tweenDuration:1e4}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsx)(ct,{})}),(0,f.jsx)(o.Col,{span:24,children:(0,f.jsxs)(i.Switch,{children:[(0,f.jsx)(i.Route,{exact:!0,path:`${t}/admin`,component:gn}),(0,f.jsx)(i.Route,{exact:!0,path:`${t}/dashboard`,component:at}),(0,f.jsx)(i.Redirect,{from:t,to:`${t}/dashboard`})]})})]})})})})};var Jn=n(71256),qn=n(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const Qn={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof Jn.PublicKey||e instanceof dt()||qn.isBuffer(e)}},er=(0,K.configureStore)({middleware:e=>e(Qn),devTools:!1,reducer:{main:U,campaigns:vn,rewards:vt,tickets:Mn,lotteryInfos:On,challengeRewards:Hn}});const tr=n.p+"static/media/bg-lucky-wheel.9b9f5b320d8e3574f290c88a766abd71.svg";var nr=n(45597);const{manifest:{appId:rr}}=O,ar=()=>{const e=(0,s.useSetBackground)();return(0,r.useEffect)((()=>{e({dark:tr,light:tr})}),[e]),(0,f.jsx)(s.AntdProvider,{appId:rr,prefixCls:rr,children:(0,f.jsx)(a.Provider,{store:er,children:(0,f.jsx)(Xn,{})})})}},83272:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/README.b814b85f212785d7efd5.md"},27803:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/panel1.c4dfe48d28d8c4ebce76.png"},85468:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/panel2.a3f21e34a2807fb886e4.png"},83943:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/panel3.b46b51e98165d84bfb4c.png"},7420:()=>{},95856:()=>{},46601:()=>{},89214:()=>{},85568:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=src_bootstrap_app_tsx-src_static_images_sound_mp3-src_static_images_winner_mp3-src_static_ima-28f3ec.9279519a.chunk.js.map